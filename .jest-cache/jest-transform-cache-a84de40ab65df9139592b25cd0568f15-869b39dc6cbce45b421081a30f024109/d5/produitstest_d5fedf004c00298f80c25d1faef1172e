69483c3ee708e9820a5385bef52d9d21
"use strict";
/**
 * Products API Integration Tests
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const server_1 = require("next/server");
// Mock the database and services
vitest_1.vi.mock('@/lib/services/database/db', () => ({
    db: {
        prepare: vitest_1.vi.fn(() => ({
            get: vitest_1.vi.fn(),
            all: vitest_1.vi.fn(),
            run: vitest_1.vi.fn()
        }))
    }
}));
vitest_1.vi.mock('jsonwebtoken', () => ({
    verify: vitest_1.vi.fn(() => ({ userId: 'user-123', email: 'test@example.com' }))
}));
// Import API handlers after mocks
const route_1 = require("@/app/api/v1/produits/route");
(0, vitest_1.describe)('Products API Integration Tests', () => {
    (0, vitest_1.beforeEach)(() => {
        vitest_1.vi.clearAllMocks();
    });
    (0, vitest_1.describe)('GET /api/v1/produits', () => {
        (0, vitest_1.it)('should return all products for authenticated user', async () => {
            const mockProducts = [
                {
                    id: 'prod-1',
                    nom: 'Tomates',
                    prix: 2.50,
                    quantite: 100,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123',
                    createdAt: '2024-01-01T00:00:00Z'
                },
                {
                    id: 'prod-2',
                    nom: 'Carottes',
                    prix: 1.80,
                    quantite: 50,
                    parcelleId: 'parcelle-2',
                    userId: 'user-123',
                    createdAt: '2024-01-02T00:00:00Z'
                }
            ];
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue(mockProducts)
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(2);
            (0, vitest_1.expect)(data.data.produits[0].nom).toBe('Tomates');
            (0, vitest_1.expect)(data.data.produits[1].nom).toBe('Carottes');
        });
        (0, vitest_1.it)('should return empty array when no products exist', async () => {
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue([])
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(0);
        });
        (0, vitest_1.it)('should filter products by parcelle', async () => {
            const mockProducts = [
                {
                    id: 'prod-1',
                    nom: 'Tomates',
                    prix: 2.50,
                    quantite: 100,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123'
                }
            ];
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue(mockProducts)
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits?parcelleId=parcelle-1', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(1);
            (0, vitest_1.expect)(data.data.produits[0].parcelleId).toBe('parcelle-1');
        });
        (0, vitest_1.it)('should support pagination', async () => {
            const mockProducts = Array.from({ length: 5 }, (_, i) => ({
                id: `prod-${i + 1}`,
                nom: `Produit ${i + 1}`,
                prix: 10 + i,
                quantite: 100,
                parcelleId: 'parcelle-1',
                userId: 'user-123'
            }));
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue(mockProducts.slice(0, 2)) // First 2 items
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits?page=1&limit=2', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(2);
            (0, vitest_1.expect)(data.data.pagination).toBeDefined();
        });
        (0, vitest_1.it)('should require authentication', async () => {
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'GET'
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(401);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('UNAUTHORIZED');
        });
        (0, vitest_1.it)('should handle database errors', async () => {
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockImplementation(() => {
                    throw new Error('Database connection failed');
                })
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(500);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('INTERNAL_ERROR');
        });
    });
    (0, vitest_1.describe)('POST /api/v1/produits', () => {
        (0, vitest_1.it)('should create new product with valid data', async () => {
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                run: vitest_1.vi.fn().mockReturnValue({ lastInsertRowid: 1 }),
                get: vitest_1.vi.fn().mockReturnValue({
                    id: 'prod-1',
                    nom: 'Nouvelles Tomates',
                    prix: 3.00,
                    quantite: 200,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123',
                    createdAt: '2024-01-01T00:00:00Z'
                })
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: 'Nouvelles Tomates',
                    prix: 3.00,
                    quantite: 200,
                    parcelleId: 'parcelle-1',
                    description: 'Tomates fraÃ®ches du jardin'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(201);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produit.nom).toBe('Nouvelles Tomates');
            (0, vitest_1.expect)(data.data.produit.prix).toBe(3.00);
            (0, vitest_1.expect)(data.data.produit.quantite).toBe(200);
        });
        (0, vitest_1.it)('should validate required fields', async () => {
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: '', // Empty name
                    prix: -1, // Negative price
                    quantite: 'invalid' // Invalid quantity type
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(400);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('VALIDATION_ERROR');
            (0, vitest_1.expect)(data.error.details).toBeDefined();
        });
        (0, vitest_1.it)('should validate price is positive', async () => {
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: 'Test Product',
                    prix: -10,
                    quantite: 100,
                    parcelleId: 'parcelle-1'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(400);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('VALIDATION_ERROR');
        });
        (0, vitest_1.it)('should validate quantity is non-negative', async () => {
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: 'Test Product',
                    prix: 10,
                    quantite: -5,
                    parcelleId: 'parcelle-1'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(400);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('VALIDATION_ERROR');
        });
        (0, vitest_1.it)('should require authentication', async () => {
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: 'Test Product',
                    prix: 10,
                    quantite: 100,
                    parcelleId: 'parcelle-1'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(401);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('UNAUTHORIZED');
        });
        (0, vitest_1.it)('should handle database insertion errors', async () => {
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                run: vitest_1.vi.fn().mockImplementation(() => {
                    throw new Error('Database insertion failed');
                })
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: 'Test Product',
                    prix: 10,
                    quantite: 100,
                    parcelleId: 'parcelle-1'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(500);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('INTERNAL_ERROR');
        });
        (0, vitest_1.it)('should handle foreign key constraint violations', async () => {
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                run: vitest_1.vi.fn().mockImplementation(() => {
                    const error = new Error('FOREIGN KEY constraint failed');
                    error.code = 'SQLITE_CONSTRAINT_FOREIGNKEY';
                    throw error;
                })
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: 'Test Product',
                    prix: 10,
                    quantite: 100,
                    parcelleId: 'non-existent-parcelle'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(400);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('INVALID_REFERENCE');
        });
    });
    (0, vitest_1.describe)('Product Search and Filtering', () => {
        (0, vitest_1.it)('should search products by name', async () => {
            const mockProducts = [
                {
                    id: 'prod-1',
                    nom: 'Tomates cerises',
                    prix: 3.50,
                    quantite: 50,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123'
                }
            ];
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue(mockProducts)
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits?search=tomates', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(1);
            (0, vitest_1.expect)(data.data.produits[0].nom).toContain('Tomates');
        });
        (0, vitest_1.it)('should filter products by price range', async () => {
            const mockProducts = [
                {
                    id: 'prod-1',
                    nom: 'Produit cher',
                    prix: 15.00,
                    quantite: 10,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123'
                }
            ];
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue(mockProducts)
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits?minPrice=10&maxPrice=20', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(1);
            (0, vitest_1.expect)(data.data.produits[0].prix).toBeGreaterThanOrEqual(10);
            (0, vitest_1.expect)(data.data.produits[0].prix).toBeLessThanOrEqual(20);
        });
        (0, vitest_1.it)('should sort products by different fields', async () => {
            const mockProducts = [
                {
                    id: 'prod-1',
                    nom: 'A Product',
                    prix: 5.00,
                    quantite: 100,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123',
                    createdAt: '2024-01-01T00:00:00Z'
                },
                {
                    id: 'prod-2',
                    nom: 'B Product',
                    prix: 3.00,
                    quantite: 200,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123',
                    createdAt: '2024-01-02T00:00:00Z'
                }
            ];
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                all: vitest_1.vi.fn().mockReturnValue(mockProducts)
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits?sortBy=prix&sortOrder=asc', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.GET)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(200);
            (0, vitest_1.expect)(data.success).toBe(true);
            (0, vitest_1.expect)(data.data.produits).toHaveLength(2);
            // Should be sorted by price ascending
            (0, vitest_1.expect)(data.data.produits[0].prix).toBeLessThanOrEqual(data.data.produits[1].prix);
        });
    });
    (0, vitest_1.describe)('Product Statistics', () => {
        (0, vitest_1.it)('should return product statistics', async () => {
            const mockStats = {
                totalProducts: 10,
                totalValue: 1500.00,
                averagePrice: 15.00,
                lowStockProducts: 2
            };
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                get: vitest_1.vi.fn().mockReturnValue(mockStats)
            });
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits/stats', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            // This would require implementing the stats endpoint
            // For now, we'll test that the main endpoint works
            const response = await (0, route_1.GET)(request);
            (0, vitest_1.expect)(response).toBeDefined();
        });
    });
    (0, vitest_1.describe)('Error Handling and Edge Cases', () => {
        (0, vitest_1.it)('should handle malformed JSON in request body', async () => {
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: 'invalid json',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(400);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('INVALID_JSON');
        });
        (0, vitest_1.it)('should handle very large product names', async () => {
            const longName = 'A'.repeat(1000);
            const request = new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: longName,
                    prix: 10,
                    quantite: 100,
                    parcelleId: 'parcelle-1'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            });
            const response = await (0, route_1.POST)(request);
            const data = await response.json();
            (0, vitest_1.expect)(response.status).toBe(400);
            (0, vitest_1.expect)(data.success).toBe(false);
            (0, vitest_1.expect)(data.error.code).toBe('VALIDATION_ERROR');
        });
        (0, vitest_1.it)('should handle concurrent product creation', async () => {
            const mockDb = await Promise.resolve().then(() => __importStar(require('@/lib/services/database/db')));
            mockDb.db.prepare.mockReturnValue({
                run: vitest_1.vi.fn().mockReturnValue({ lastInsertRowid: 1 }),
                get: vitest_1.vi.fn().mockReturnValue({
                    id: 'prod-1',
                    nom: 'Concurrent Product',
                    prix: 10,
                    quantite: 100,
                    parcelleId: 'parcelle-1',
                    userId: 'user-123'
                })
            });
            const requests = Array.from({ length: 3 }, (_, i) => new server_1.NextRequest('http://localhost:3000/api/v1/produits', {
                method: 'POST',
                body: JSON.stringify({
                    nom: `Concurrent Product ${i}`,
                    prix: 10,
                    quantite: 100,
                    parcelleId: 'parcelle-1'
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer mock-jwt-token'
                }
            }));
            const responses = await Promise.all(requests.map(request => (0, route_1.POST)(request)));
            responses.forEach(response => {
                (0, vitest_1.expect)(response.status).toBeOneOf([201, 500]); // Either success or handled error
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRjpcXFlvdWNsb3VkXFxEb2N1bWVudHNcXFByb2pldHNcXExvZ2lzdGl4XFx0ZXN0c1xcaW50ZWdyYXRpb25cXGFwaVxccHJvZHVpdHMudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsbUNBQXlFO0FBQ3pFLHdDQUEwQztBQUUxQyxpQ0FBaUM7QUFDakMsV0FBRSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzNDLEVBQUUsRUFBRTtRQUNGLE9BQU8sRUFBRSxXQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDcEIsR0FBRyxFQUFFLFdBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDWixHQUFHLEVBQUUsV0FBRSxDQUFDLEVBQUUsRUFBRTtZQUNaLEdBQUcsRUFBRSxXQUFFLENBQUMsRUFBRSxFQUFFO1NBQ2IsQ0FBQyxDQUFDO0tBQ0o7Q0FDRixDQUFDLENBQUMsQ0FBQztBQUVKLFdBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDN0IsTUFBTSxFQUFFLFdBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLGtCQUFrQixFQUFFLENBQUMsQ0FBQztDQUN6RSxDQUFDLENBQUMsQ0FBQztBQUVKLGtDQUFrQztBQUNsQyx1REFBc0c7QUFFdEcsSUFBQSxpQkFBUSxFQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtJQUM5QyxJQUFBLG1CQUFVLEVBQUMsR0FBRyxFQUFFO1FBQ2QsV0FBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxpQkFBUSxFQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtRQUNwQyxJQUFBLFdBQUUsRUFBQyxtREFBbUQsRUFBRSxLQUFLLElBQUksRUFBRTtZ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IkY6XFxZb3VjbG91ZFxcRG9jdW1lbnRzXFxQcm9qZXRzXFxMb2dpc3RpeFxcdGVzdHNcXGludGVncmF0aW9uXFxhcGlcXHByb2R1aXRzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFByb2R1Y3RzIEFQSSBJbnRlZ3JhdGlvbiBUZXN0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2gsIHZpIH0gZnJvbSAndml0ZXN0JztcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcblxyXG4vLyBNb2NrIHRoZSBkYXRhYmFzZSBhbmQgc2VydmljZXNcclxudmkubW9jaygnQC9saWIvc2VydmljZXMvZGF0YWJhc2UvZGInLCAoKSA9PiAoe1xyXG4gIGRiOiB7XHJcbiAgICBwcmVwYXJlOiB2aS5mbigoKSA9PiAoe1xyXG4gICAgICBnZXQ6IHZpLmZuKCksXHJcbiAgICAgIGFsbDogdmkuZm4oKSxcclxuICAgICAgcnVuOiB2aS5mbigpXHJcbiAgICB9KSlcclxuICB9XHJcbn0pKTtcclxuXHJcbnZpLm1vY2soJ2pzb253ZWJ0b2tlbicsICgpID0+ICh7XHJcbiAgdmVyaWZ5OiB2aS5mbigoKSA9PiAoeyB1c2VySWQ6ICd1c2VyLTEyMycsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScgfSkpXHJcbn0pKTtcclxuXHJcbi8vIEltcG9ydCBBUEkgaGFuZGxlcnMgYWZ0ZXIgbW9ja3NcclxuaW1wb3J0IHsgR0VUIGFzIGdldFByb2R1aXRzSGFuZGxlciwgUE9TVCBhcyBjcmVhdGVQcm9kdWl0SGFuZGxlciB9IGZyb20gJ0AvYXBwL2FwaS92MS9wcm9kdWl0cy9yb3V0ZSc7XHJcblxyXG5kZXNjcmliZSgnUHJvZHVjdHMgQVBJIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgdmkuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnR0VUIC9hcGkvdjEvcHJvZHVpdHMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgcHJvZHVjdHMgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Byb2R1Y3RzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAncHJvZC0xJyxcclxuICAgICAgICAgIG5vbTogJ1RvbWF0ZXMnLFxyXG4gICAgICAgICAgcHJpeDogMi41MCxcclxuICAgICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgICBwYXJjZWxsZUlkOiAncGFyY2VsbGUtMScsXHJcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWidcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAncHJvZC0yJyxcclxuICAgICAgICAgIG5vbTogJ0Nhcm90dGVzJyxcclxuICAgICAgICAgIHByaXg6IDEuODAsXHJcbiAgICAgICAgICBxdWFudGl0ZTogNTAsXHJcbiAgICAgICAgICBwYXJjZWxsZUlkOiAncGFyY2VsbGUtMicsXHJcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTAyVDAwOjAwOjAwWidcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBjb25zdCBtb2NrRGIgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3NlcnZpY2VzL2RhdGFiYXNlL2RiJyk7XHJcbiAgICAgIChtb2NrRGIuZGIucHJlcGFyZSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgYWxsOiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrUHJvZHVjdHMpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92MS9wcm9kdWl0cycsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWp3dC10b2tlbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQcm9kdWl0c0hhbmRsZXIocmVxdWVzdCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucHJvZHVpdHMpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0c1swXS5ub20pLnRvQmUoJ1RvbWF0ZXMnKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0c1sxXS5ub20pLnRvQmUoJ0Nhcm90dGVzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIG5vIHByb2R1Y3RzIGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrRGIgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3NlcnZpY2VzL2RhdGFiYXNlL2RiJyk7XHJcbiAgICAgIChtb2NrRGIuZGIucHJlcGFyZSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgYWxsOiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stand0LXRva2VuJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFByb2R1aXRzSGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0cykudG9IYXZlTGVuZ3RoKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgcHJvZHVjdHMgYnkgcGFyY2VsbGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tQcm9kdWN0cyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ3Byb2QtMScsXHJcbiAgICAgICAgICBub206ICdUb21hdGVzJyxcclxuICAgICAgICAgIHByaXg6IDIuNTAsXHJcbiAgICAgICAgICBxdWFudGl0ZTogMTAwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgbW9ja0RiID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS9kYicpO1xyXG4gICAgICAobW9ja0RiLmRiLnByZXBhcmUgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGFsbDogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1Byb2R1Y3RzKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHM/cGFyY2VsbGVJZD1wYXJjZWxsZS0xJywge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stand0LXRva2VuJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFByb2R1aXRzSGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0cykudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QoZGF0YS5kYXRhLnByb2R1aXRzWzBdLnBhcmNlbGxlSWQpLnRvQmUoJ3BhcmNlbGxlLTEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBwYWdpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUHJvZHVjdHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sIChfLCBpKSA9PiAoe1xyXG4gICAgICAgIGlkOiBgcHJvZC0ke2kgKyAxfWAsXHJcbiAgICAgICAgbm9tOiBgUHJvZHVpdCAke2kgKyAxfWAsXHJcbiAgICAgICAgcHJpeDogMTAgKyBpLFxyXG4gICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJ1xyXG4gICAgICB9KSk7XHJcblxyXG4gICAgICBjb25zdCBtb2NrRGIgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3NlcnZpY2VzL2RhdGFiYXNlL2RiJyk7XHJcbiAgICAgIChtb2NrRGIuZGIucHJlcGFyZSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgYWxsOiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrUHJvZHVjdHMuc2xpY2UoMCwgMikpIC8vIEZpcnN0IDIgaXRlbXNcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzP3BhZ2U9MSZsaW1pdD0yJywge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stand0LXRva2VuJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFByb2R1aXRzSGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0cykudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgICBleHBlY3QoZGF0YS5kYXRhLnBhZ2luYXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgYXV0aGVudGljYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UHJvZHVpdHNIYW5kbGVyKHJlcXVlc3QpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tEYiA9IGF3YWl0IGltcG9ydCgnQC9saWIvc2VydmljZXMvZGF0YWJhc2UvZGInKTtcclxuICAgICAgKG1vY2tEYi5kYi5wcmVwYXJlIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBhbGw6IHZpLmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbW9jay1qd3QtdG9rZW4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UHJvZHVpdHNIYW5kbGVyKHJlcXVlc3QpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnSU5URVJOQUxfRVJST1InKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUE9TVCAvYXBpL3YxL3Byb2R1aXRzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgbmV3IHByb2R1Y3Qgd2l0aCB2YWxpZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrRGIgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3NlcnZpY2VzL2RhdGFiYXNlL2RiJyk7XHJcbiAgICAgIChtb2NrRGIuZGIucHJlcGFyZSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgcnVuOiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGxhc3RJbnNlcnRSb3dpZDogMSB9KSxcclxuICAgICAgICBnZXQ6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIGlkOiAncHJvZC0xJyxcclxuICAgICAgICAgIG5vbTogJ05vdXZlbGxlcyBUb21hdGVzJyxcclxuICAgICAgICAgIHByaXg6IDMuMDAsXHJcbiAgICAgICAgICBxdWFudGl0ZTogMjAwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonXHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vbTogJ05vdXZlbGxlcyBUb21hdGVzJyxcclxuICAgICAgICAgIHByaXg6IDMuMDAsXHJcbiAgICAgICAgICBxdWFudGl0ZTogMjAwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUb21hdGVzIGZyYcOuY2hlcyBkdSBqYXJkaW4nXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWp3dC10b2tlbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQcm9kdWl0SGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0Lm5vbSkudG9CZSgnTm91dmVsbGVzIFRvbWF0ZXMnKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0LnByaXgpLnRvQmUoMy4wMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucHJvZHVpdC5xdWFudGl0ZSkudG9CZSgyMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbm9tOiAnJywgLy8gRW1wdHkgbmFtZVxyXG4gICAgICAgICAgcHJpeDogLTEsIC8vIE5lZ2F0aXZlIHByaWNlXHJcbiAgICAgICAgICBxdWFudGl0ZTogJ2ludmFsaWQnIC8vIEludmFsaWQgcXVhbnRpdHkgdHlwZVxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbW9jay1qd3QtdG9rZW4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUHJvZHVpdEhhbmRsZXIocmVxdWVzdCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmRldGFpbHMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHByaWNlIGlzIHBvc2l0aXZlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vbTogJ1Rlc3QgUHJvZHVjdCcsXHJcbiAgICAgICAgICBwcml4OiAtMTAsXHJcbiAgICAgICAgICBxdWFudGl0ZTogMTAwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWp3dC10b2tlbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQcm9kdWl0SGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcXVhbnRpdHkgaXMgbm9uLW5lZ2F0aXZlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vbTogJ1Rlc3QgUHJvZHVjdCcsXHJcbiAgICAgICAgICBwcml4OiAxMCxcclxuICAgICAgICAgIHF1YW50aXRlOiAtNSxcclxuICAgICAgICAgIHBhcmNlbGxlSWQ6ICdwYXJjZWxsZS0xJ1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbW9jay1qd3QtdG9rZW4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUHJvZHVpdEhhbmRsZXIocmVxdWVzdCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgYXV0aGVudGljYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbm9tOiAnVGVzdCBQcm9kdWN0JyxcclxuICAgICAgICAgIHByaXg6IDEwLFxyXG4gICAgICAgICAgcXVhbnRpdGU6IDEwMCxcclxuICAgICAgICAgIHBhcmNlbGxlSWQ6ICdwYXJjZWxsZS0xJ1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQcm9kdWl0SGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgaW5zZXJ0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RiID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS9kYicpO1xyXG4gICAgICAobW9ja0RiLmRiLnByZXBhcmUgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHJ1bjogdmkuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBpbnNlcnRpb24gZmFpbGVkJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vbTogJ1Rlc3QgUHJvZHVjdCcsXHJcbiAgICAgICAgICBwcml4OiAxMCxcclxuICAgICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgICBwYXJjZWxsZUlkOiAncGFyY2VsbGUtMSdcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stand0LXRva2VuJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVByb2R1aXRIYW5kbGVyKHJlcXVlc3QpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnSU5URVJOQUxfRVJST1InKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgdmlvbGF0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RiID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS9kYicpO1xyXG4gICAgICAobW9ja0RiLmRiLnByZXBhcmUgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHJ1bjogdmkuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0ZPUkVJR04gS0VZIGNvbnN0cmFpbnQgZmFpbGVkJyk7XHJcbiAgICAgICAgICAoZXJyb3IgYXMgYW55KS5jb2RlID0gJ1NRTElURV9DT05TVFJBSU5UX0ZPUkVJR05LRVknO1xyXG4gICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vbTogJ1Rlc3QgUHJvZHVjdCcsXHJcbiAgICAgICAgICBwcml4OiAxMCxcclxuICAgICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgICBwYXJjZWxsZUlkOiAnbm9uLWV4aXN0ZW50LXBhcmNlbGxlJ1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbW9jay1qd3QtdG9rZW4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlUHJvZHVpdEhhbmRsZXIocmVxdWVzdCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdJTlZBTElEX1JFRkVSRU5DRScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQcm9kdWN0IFNlYXJjaCBhbmQgRmlsdGVyaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzZWFyY2ggcHJvZHVjdHMgYnkgbmFtZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Byb2R1Y3RzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAncHJvZC0xJyxcclxuICAgICAgICAgIG5vbTogJ1RvbWF0ZXMgY2VyaXNlcycsXHJcbiAgICAgICAgICBwcml4OiAzLjUwLFxyXG4gICAgICAgICAgcXVhbnRpdGU6IDUwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgbW9ja0RiID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS9kYicpO1xyXG4gICAgICAobW9ja0RiLmRiLnByZXBhcmUgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGFsbDogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1Byb2R1Y3RzKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHM/c2VhcmNoPXRvbWF0ZXMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbW9jay1qd3QtdG9rZW4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UHJvZHVpdHNIYW5kbGVyKHJlcXVlc3QpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoZGF0YS5kYXRhLnByb2R1aXRzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucHJvZHVpdHNbMF0ubm9tKS50b0NvbnRhaW4oJ1RvbWF0ZXMnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZmlsdGVyIHByb2R1Y3RzIGJ5IHByaWNlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUHJvZHVjdHMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdwcm9kLTEnLFxyXG4gICAgICAgICAgbm9tOiAnUHJvZHVpdCBjaGVyJyxcclxuICAgICAgICAgIHByaXg6IDE1LjAwLFxyXG4gICAgICAgICAgcXVhbnRpdGU6IDEwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgbW9ja0RiID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS9kYicpO1xyXG4gICAgICAobW9ja0RiLmRiLnByZXBhcmUgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGFsbDogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1Byb2R1Y3RzKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHM/bWluUHJpY2U9MTAmbWF4UHJpY2U9MjAnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgbW9jay1qd3QtdG9rZW4nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UHJvZHVpdHNIYW5kbGVyKHJlcXVlc3QpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoZGF0YS5kYXRhLnByb2R1aXRzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucHJvZHVpdHNbMF0ucHJpeCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucHJvZHVpdHNbMF0ucHJpeCkudG9CZUxlc3NUaGFuT3JFcXVhbCgyMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNvcnQgcHJvZHVjdHMgYnkgZGlmZmVyZW50IGZpZWxkcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Byb2R1Y3RzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAncHJvZC0xJyxcclxuICAgICAgICAgIG5vbTogJ0EgUHJvZHVjdCcsXHJcbiAgICAgICAgICBwcml4OiA1LjAwLFxyXG4gICAgICAgICAgcXVhbnRpdGU6IDEwMCxcclxuICAgICAgICAgIHBhcmNlbGxlSWQ6ICdwYXJjZWxsZS0xJyxcclxuICAgICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdwcm9kLTInLFxyXG4gICAgICAgICAgbm9tOiAnQiBQcm9kdWN0JyxcclxuICAgICAgICAgIHByaXg6IDMuMDAsXHJcbiAgICAgICAgICBxdWFudGl0ZTogMjAwLFxyXG4gICAgICAgICAgcGFyY2VsbGVJZDogJ3BhcmNlbGxlLTEnLFxyXG4gICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMlQwMDowMDowMFonXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgbW9ja0RiID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zZXJ2aWNlcy9kYXRhYmFzZS9kYicpO1xyXG4gICAgICAobW9ja0RiLmRiLnByZXBhcmUgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGFsbDogdmkuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1Byb2R1Y3RzKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHM/c29ydEJ5PXByaXgmc29ydE9yZGVyPWFzYycsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWp3dC10b2tlbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQcm9kdWl0c0hhbmRsZXIocmVxdWVzdCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucHJvZHVpdHMpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgLy8gU2hvdWxkIGJlIHNvcnRlZCBieSBwcmljZSBhc2NlbmRpbmdcclxuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wcm9kdWl0c1swXS5wcml4KS50b0JlTGVzc1RoYW5PckVxdWFsKGRhdGEuZGF0YS5wcm9kdWl0c1sxXS5wcml4KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUHJvZHVjdCBTdGF0aXN0aWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvZHVjdCBzdGF0aXN0aWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrU3RhdHMgPSB7XHJcbiAgICAgICAgdG90YWxQcm9kdWN0czogMTAsXHJcbiAgICAgICAgdG90YWxWYWx1ZTogMTUwMC4wMCxcclxuICAgICAgICBhdmVyYWdlUHJpY2U6IDE1LjAwLFxyXG4gICAgICAgIGxvd1N0b2NrUHJvZHVjdHM6IDJcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG1vY2tEYiA9IGF3YWl0IGltcG9ydCgnQC9saWIvc2VydmljZXMvZGF0YWJhc2UvZGInKTtcclxuICAgICAgKG1vY2tEYi5kYi5wcmVwYXJlIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBnZXQ6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKG1vY2tTdGF0cylcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzL3N0YXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stand0LXRva2VuJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUaGlzIHdvdWxkIHJlcXVpcmUgaW1wbGVtZW50aW5nIHRoZSBzdGF0cyBlbmRwb2ludFxyXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCB0ZXN0IHRoYXQgdGhlIG1haW4gZW5kcG9pbnQgd29ya3NcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRQcm9kdWl0c0hhbmRsZXIocmVxdWVzdCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgSlNPTiBpbiByZXF1ZXN0IGJvZHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcHJvZHVpdHMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgYm9keTogJ2ludmFsaWQganNvbicsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWp3dC10b2tlbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVQcm9kdWl0SGFuZGxlcihyZXF1ZXN0KTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ0lOVkFMSURfSlNPTicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSBwcm9kdWN0IG5hbWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsb25nTmFtZSA9ICdBJy5yZXBlYXQoMTAwMCk7XHJcblxyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vbTogbG9uZ05hbWUsXHJcbiAgICAgICAgICBwcml4OiAxMCxcclxuICAgICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgICBwYXJjZWxsZUlkOiAncGFyY2VsbGUtMSdcclxuICAgICAgICB9KSxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stand0LXRva2VuJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVByb2R1aXRIYW5kbGVyKHJlcXVlc3QpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBwcm9kdWN0IGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrRGIgPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3NlcnZpY2VzL2RhdGFiYXNlL2RiJyk7XHJcbiAgICAgIChtb2NrRGIuZGIucHJlcGFyZSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgcnVuOiB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGxhc3RJbnNlcnRSb3dpZDogMSB9KSxcclxuICAgICAgICBnZXQ6IHZpLmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIGlkOiAncHJvZC0xJyxcclxuICAgICAgICAgIG5vbTogJ0NvbmN1cnJlbnQgUHJvZHVjdCcsXHJcbiAgICAgICAgICBwcml4OiAxMCxcclxuICAgICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgICBwYXJjZWxsZUlkOiAncGFyY2VsbGUtMScsXHJcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMydcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3RzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMyB9LCAoXywgaSkgPT4gXHJcbiAgICAgICAgbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3YxL3Byb2R1aXRzJywge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIG5vbTogYENvbmN1cnJlbnQgUHJvZHVjdCAke2l9YCxcclxuICAgICAgICAgICAgcHJpeDogMTAsXHJcbiAgICAgICAgICAgIHF1YW50aXRlOiAxMDAsXHJcbiAgICAgICAgICAgIHBhcmNlbGxlSWQ6ICdwYXJjZWxsZS0xJ1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWp3dC10b2tlbidcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgcmVxdWVzdHMubWFwKHJlcXVlc3QgPT4gY3JlYXRlUHJvZHVpdEhhbmRsZXIocmVxdWVzdCkpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXNwb25zZXMuZm9yRWFjaChyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZU9uZU9mKFsyMDEsIDUwMF0pOyAvLyBFaXRoZXIgc3VjY2VzcyBvciBoYW5kbGVkIGVycm9yXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==