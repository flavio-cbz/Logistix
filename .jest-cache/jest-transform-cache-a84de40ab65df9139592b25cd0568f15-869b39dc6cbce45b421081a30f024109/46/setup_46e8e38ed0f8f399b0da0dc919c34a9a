24ad275103be147e1c577032a8a10f75
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.expectToResolve = exports.expectToThrow = exports.flushPromises = exports.waitForPromises = exports.ServiceTestUtils = exports.DatabaseTestUtils = exports.createMockSession = exports.createMockProduct = exports.createMockParcelle = exports.createMockUser = exports.createMockDatabase = exports.createMockResponse = exports.createMockRequest = void 0;
const tslib_1 = require("tslib");
const globals_1 = require("@jest/globals");
// Mock Next.js modules
globals_1.jest.mock('next/headers', () => ({
    cookies: globals_1.jest.fn(() => ({
        get: globals_1.jest.fn(),
        set: globals_1.jest.fn(),
        delete: globals_1.jest.fn(),
        has: globals_1.jest.fn()
    })),
    headers: globals_1.jest.fn(() => ({
        get: globals_1.jest.fn(),
        set: globals_1.jest.fn(),
        has: globals_1.jest.fn(),
        delete: globals_1.jest.fn()
    }))
}));
globals_1.jest.mock('next/navigation', () => ({
    redirect: globals_1.jest.fn(),
    notFound: globals_1.jest.fn()
}));
// Mock database
globals_1.jest.mock('better-sqlite3', () => {
    return globals_1.jest.fn().mockImplementation(() => ({
        prepare: globals_1.jest.fn().mockReturnValue({
            run: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            all: globals_1.jest.fn()
        }),
        exec: globals_1.jest.fn(),
        close: globals_1.jest.fn(),
        pragma: globals_1.jest.fn(),
        transaction: globals_1.jest.fn().mockImplementation((fn) => fn)
    }));
});
// Mock bcrypt
globals_1.jest.mock('bcrypt', () => ({
    hash: globals_1.jest.fn().mockResolvedValue('hashed-password'),
    compare: globals_1.jest.fn().mockResolvedValue(true),
    genSalt: globals_1.jest.fn().mockResolvedValue('salt')
}));
// Mock jsonwebtoken
globals_1.jest.mock('jsonwebtoken', () => ({
    sign: globals_1.jest.fn().mockReturnValue('mock-jwt-token'),
    verify: globals_1.jest.fn().mockReturnValue({ userId: 'test-user-id', role: 'user' }),
    decode: globals_1.jest.fn().mockReturnValue({ userId: 'test-user-id', role: 'user' })
}));
// Mock winston logger
globals_1.jest.mock('winston', () => ({
    createLogger: globals_1.jest.fn().mockReturnValue({
        info: globals_1.jest.fn(),
        error: globals_1.jest.fn(),
        warn: globals_1.jest.fn(),
        debug: globals_1.jest.fn()
    }),
    format: {
        combine: globals_1.jest.fn(),
        timestamp: globals_1.jest.fn(),
        errors: globals_1.jest.fn(),
        json: globals_1.jest.fn(),
        printf: globals_1.jest.fn()
    },
    transports: {
        Console: globals_1.jest.fn(),
        File: globals_1.jest.fn()
    }
}));
// Mock winston-daily-rotate-file
globals_1.jest.mock('winston-daily-rotate-file', () => globals_1.jest.fn());
const better_sqlite3_1 = tslib_1.__importDefault(require("better-sqlite3"));
// Global test setup for backend tests
beforeAll(async () => {
    // Set test environment variables
    process.env.NODE_ENV = 'test';
    process.env.DATABASE_URL = ':memory:';
    process.env.JWT_SECRET = 'test-jwt-secret';
    process.env.BCRYPT_ROUNDS = '4'; // Faster hashing for tests
    // Suppress console output in tests unless debugging
    if (!process.env.DEBUG_TESTS) {
        console.log = globals_1.jest.fn();
        console.info = globals_1.jest.fn();
        console.warn = globals_1.jest.fn();
        console.error = globals_1.jest.fn();
    }
});
beforeEach(() => {
    // Clear all mocks before each test
    globals_1.jest.clearAllMocks();
    globals_1.jest.clearAllTimers();
    // Use fake timers for consistent testing
    globals_1.jest.useFakeTimers();
});
afterEach(() => {
    // Restore real timers
    globals_1.jest.useRealTimers();
    // Reset modules to ensure clean state
    globals_1.jest.resetModules();
});
afterAll(async () => {
    // Cleanup any global resources
    await new Promise(resolve => setTimeout(resolve, 100));
});
// Global mocks
global.fetch = globals_1.jest.fn();
// Test utilities
const createMockRequest = (overrides = {}) => ({
    method: 'GET',
    url: '/test',
    headers: {},
    body: null,
    query: {},
    params: {},
    ...overrides
});
exports.createMockRequest = createMockRequest;
const createMockResponse = () => {
    const res = {
        status: globals_1.jest.fn().mockReturnThis(),
        json: globals_1.jest.fn().mockReturnThis(),
        send: globals_1.jest.fn().mockReturnThis(),
        end: globals_1.jest.fn().mockReturnThis(),
        setHeader: globals_1.jest.fn().mockReturnThis(),
        getHeader: globals_1.jest.fn(),
        headers: {},
        statusCode: 200
    };
    return res;
};
exports.createMockResponse = createMockResponse;
const createMockDatabase = () => {
    const mockDb = {
        prepare: globals_1.jest.fn().mockReturnValue({
            run: globals_1.jest.fn().mockReturnValue({ changes: 1, lastInsertRowid: 1 }),
            get: globals_1.jest.fn().mockReturnValue(null),
            all: globals_1.jest.fn().mockReturnValue([])
        }),
        exec: globals_1.jest.fn(),
        close: globals_1.jest.fn(),
        pragma: globals_1.jest.fn(),
        transaction: globals_1.jest.fn().mockImplementation((fn) => fn)
    };
    return mockDb;
};
exports.createMockDatabase = createMockDatabase;
const createMockUser = (overrides = {}) => ({
    id: 'test-user-id',
    username: 'testuser',
    email: 'test@example.com',
    password: 'hashed-password',
    role: 'user',
    profile: JSON.stringify({
        firstName: 'Test',
        lastName: 'User',
        theme: 'system'
    }),
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
    ...overrides
});
exports.createMockUser = createMockUser;
const createMockParcelle = (overrides = {}) => ({
    id: 'test-parcelle-id',
    numero: 'P001',
    transporteur: 'DHL',
    poids: 1.5,
    prix_achat: 25.50,
    date_creation: new Date().toISOString(),
    user_id: 'test-user-id',
    notes: 'Test parcelle',
    status: 'active',
    ...overrides
});
exports.createMockParcelle = createMockParcelle;
const createMockProduct = (overrides = {}) => ({
    id: 'test-product-id',
    nom: 'Test Product',
    prix: 15.99,
    quantite: 1,
    parcelle_id: 'test-parcelle-id',
    description: 'Test product description',
    status: 'available',
    date_creation: new Date().toISOString(),
    date_vente: null,
    prix_vente: null,
    plateforme: null,
    frais_vente: 0,
    benefice: null,
    images: null,
    tags: null,
    ...overrides
});
exports.createMockProduct = createMockProduct;
const createMockSession = (overrides = {}) => ({
    id: 'test-session-id',
    user_id: 'test-user-id',
    token: 'mock-jwt-token',
    expires_at: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
    created_at: new Date().toISOString(),
    ...overrides
});
exports.createMockSession = createMockSession;
// Database test utilities
class DatabaseTestUtils {
    static createInMemoryDatabase() {
        return new better_sqlite3_1.default(':memory:');
    }
    static async initializeTestSchema(db) {
        const schema = `
      CREATE TABLE IF NOT EXISTS users (
        id TEXT PRIMARY KEY,
        username TEXT UNIQUE NOT NULL,
        email TEXT UNIQUE NOT NULL,
        password TEXT NOT NULL,
        role TEXT DEFAULT 'user',
        profile TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      );

      CREATE TABLE IF NOT EXISTS parcelles (
        id TEXT PRIMARY KEY,
        numero TEXT UNIQUE NOT NULL,
        transporteur TEXT NOT NULL,
        poids REAL NOT NULL,
        prix_achat REAL NOT NULL,
        date_creation DATETIME DEFAULT CURRENT_TIMESTAMP,
        user_id TEXT NOT NULL,
        notes TEXT,
        status TEXT DEFAULT 'active',
        FOREIGN KEY (user_id) REFERENCES users (id)
      );

      CREATE TABLE IF NOT EXISTS products (
        id TEXT PRIMARY KEY,
        nom TEXT NOT NULL,
        prix REAL NOT NULL,
        quantite INTEGER NOT NULL,
        parcelle_id TEXT NOT NULL,
        description TEXT,
        status TEXT DEFAULT 'available',
        date_creation DATETIME DEFAULT CURRENT_TIMESTAMP,
        date_vente DATETIME,
        prix_vente REAL,
        plateforme TEXT,
        frais_vente REAL DEFAULT 0,
        benefice REAL,
        images TEXT,
        tags TEXT,
        FOREIGN KEY (parcelle_id) REFERENCES parcelles (id)
      );

      CREATE TABLE IF NOT EXISTS sessions (
        id TEXT PRIMARY KEY,
        user_id TEXT NOT NULL,
        token TEXT UNIQUE NOT NULL,
        expires_at DATETIME NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (user_id) REFERENCES users (id)
      );
    `;
        db.exec(schema);
    }
    static async seedTestData(db) {
        const user = (0, exports.createMockUser)();
        const parcelle = (0, exports.createMockParcelle)();
        const product = (0, exports.createMockProduct)();
        const session = (0, exports.createMockSession)();
        // Insert test data
        db.prepare(`
      INSERT INTO users (id, username, email, password, role, profile)
      VALUES (?, ?, ?, ?, ?, ?)
    `).run(user.id, user.username, user.email, user.password, user.role, user.profile);
        db.prepare(`
      INSERT INTO parcelles (id, numero, transporteur, poids, prix_achat, user_id, notes, status)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?)
    `).run(parcelle.id, parcelle.numero, parcelle.transporteur, parcelle.poids, parcelle.prix_achat, parcelle.user_id, parcelle.notes, parcelle.status);
        db.prepare(`
      INSERT INTO products (id, nom, prix, quantite, parcelle_id, description, status)
      VALUES (?, ?, ?, ?, ?, ?, ?)
    `).run(product.id, product.nom, product.prix, product.quantite, product.parcelle_id, product.description, product.status);
        db.prepare(`
      INSERT INTO sessions (id, user_id, token, expires_at)
      VALUES (?, ?, ?, ?)
    `).run(session.id, session.user_id, session.token, session.expires_at);
        return { user, parcelle, product, session };
    }
    static async cleanDatabase(db) {
        const tables = ['sessions', 'products', 'parcelles', 'users'];
        for (const table of tables) {
            db.exec(`DELETE FROM ${table}`);
        }
    }
}
exports.DatabaseTestUtils = DatabaseTestUtils;
// Service test utilities
class ServiceTestUtils {
    static createMockLogger() {
        return {
            info: globals_1.jest.fn(),
            error: globals_1.jest.fn(),
            warn: globals_1.jest.fn(),
            debug: globals_1.jest.fn()
        };
    }
    static createMockAuthService() {
        return {
            validateCredentials: globals_1.jest.fn().mockResolvedValue(true),
            hashPassword: globals_1.jest.fn().mockResolvedValue('hashed-password'),
            comparePassword: globals_1.jest.fn().mockResolvedValue(true),
            generateToken: globals_1.jest.fn().mockReturnValue('mock-token'),
            validateToken: globals_1.jest.fn().mockReturnValue({ userId: 'test-user-id', role: 'user' }),
            createSession: globals_1.jest.fn().mockResolvedValue((0, exports.createMockSession)()),
            validateSession: globals_1.jest.fn().mockResolvedValue((0, exports.createMockSession)()),
            destroySession: globals_1.jest.fn().mockResolvedValue(true)
        };
    }
    static createMockDatabaseService() {
        return {
            users: {
                findById: globals_1.jest.fn().mockResolvedValue((0, exports.createMockUser)()),
                findByEmail: globals_1.jest.fn().mockResolvedValue((0, exports.createMockUser)()),
                create: globals_1.jest.fn().mockResolvedValue((0, exports.createMockUser)()),
                update: globals_1.jest.fn().mockResolvedValue((0, exports.createMockUser)()),
                delete: globals_1.jest.fn().mockResolvedValue(true)
            },
            parcelles: {
                findById: globals_1.jest.fn().mockResolvedValue((0, exports.createMockParcelle)()),
                findByUserId: globals_1.jest.fn().mockResolvedValue([(0, exports.createMockParcelle)()]),
                create: globals_1.jest.fn().mockResolvedValue((0, exports.createMockParcelle)()),
                update: globals_1.jest.fn().mockResolvedValue((0, exports.createMockParcelle)()),
                delete: globals_1.jest.fn().mockResolvedValue(true)
            },
            products: {
                findById: globals_1.jest.fn().mockResolvedValue((0, exports.createMockProduct)()),
                findByParcelleId: globals_1.jest.fn().mockResolvedValue([(0, exports.createMockProduct)()]),
                create: globals_1.jest.fn().mockResolvedValue((0, exports.createMockProduct)()),
                update: globals_1.jest.fn().mockResolvedValue((0, exports.createMockProduct)()),
                delete: globals_1.jest.fn().mockResolvedValue(true)
            }
        };
    }
}
exports.ServiceTestUtils = ServiceTestUtils;
// Async test utilities
const waitForPromises = () => new Promise(resolve => setImmediate(resolve));
exports.waitForPromises = waitForPromises;
const flushPromises = () => new Promise(resolve => setTimeout(resolve, 0));
exports.flushPromises = flushPromises;
// Error testing utilities
const expectToThrow = async (fn, expectedError) => {
    try {
        await fn();
        throw new Error('Expected function to throw');
    }
    catch (error) {
        if (expectedError && !error.message.includes(expectedError)) {
            throw new Error(`Expected error to contain "${expectedError}", got "${error.message}"`);
        }
    }
};
exports.expectToThrow = expectToThrow;
const expectToResolve = async (fn) => {
    try {
        return await fn();
    }
    catch (error) {
        throw new Error(`Expected function to resolve, but it threw: ${error.message}`);
    }
};
exports.expectToResolve = expectToResolve;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRjpcXFlvdWNsb3VkXFxEb2N1bWVudHNcXFByb2pldHNcXExvZ2lzdGl4XFx0ZXN0c1xcYmFja2VuZFxcc2V0dXAudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLDJDQUFvQztBQTZDcEMsdUJBQXVCO0FBQ3ZCLGNBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDL0IsT0FBTyxFQUFFLGNBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUN0QixHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNkLEdBQUcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2QsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7S0FDZixDQUFDLENBQUM7SUFDSCxPQUFPLEVBQUUsY0FBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ3RCLEdBQUcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2QsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2xCLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyxDQUFBO0FBRUgsY0FBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLFFBQVEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ25CLFFBQVEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0NBQ3BCLENBQUMsQ0FBQyxDQUFBO0FBRUgsZ0JBQWdCO0FBQ2hCLGNBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQy9CLE9BQU8sY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDekMsT0FBTyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7WUFDakMsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNkLEdBQUcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2YsQ0FBQztRQUNGLElBQUksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDaEIsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsV0FBVyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO0tBQ3RELENBQUMsQ0FBQyxDQUFBO0FBQ0wsQ0FBQyxDQUFDLENBQUE7QUFFRixjQUFjO0FBQ2QsY0FBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN6QixJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGlCQUFpQixDQUFDO0lBQ3BELE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQzFDLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDO0NBQzdDLENBQUMsQ0FBQyxDQUFBO0FBRUgsb0JBQW9CO0FBQ3BCLGNBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDL0IsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUM7SUFDakQsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQztJQUMzRSxNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxjQUFjLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDO0NBQzVFLENBQUMsQ0FBQyxDQUFBO0FBRUgsc0JBQXNCO0FBQ3RCLGNBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDMUIsWUFBWSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7UUFDdEMsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixLQUFLLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2pCLENBQUM7SUFDRixNQUFNLEVBQUU7UUFDTixPQUFPLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNwQixNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2xCO0lBQ0QsVUFBVSxFQUFFO1FBQ1YsT0FBTyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7S0FDaEI7Q0FDRixDQUFDLENBQUMsQ0FBQTtBQUVILGlDQUFpQztBQUNqQyxjQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRSxDQUFDLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0FBcEh2RCw0RUFBcUM7QUFFckMsc0NBQXNDO0FBQ3RDLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtJQUNuQixpQ0FBaUM7SUFDakMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFBO0lBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQTtJQUNyQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQTtJQUMxQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUEsQ0FBQywyQkFBMkI7SUFFM0Qsb0RBQW9EO0lBQ3BELElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxHQUFHLEdBQUcsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO1FBQ3ZCLE9BQU8sQ0FBQyxJQUFJLEdBQUcsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO1FBQ3hCLE9BQU8sQ0FBQyxJQUFJLEdBQUcsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO1FBQ3hCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO0lBQzNCLENBQUM7QUFDSCxDQUFDLENBQUMsQ0FBQTtBQUVGLFVBQVUsQ0FBQyxHQUFHLEVBQUU7SUFDZCxtQ0FBbUM7SUFDbkMsY0FBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO0lBQ3BCLGNBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQTtJQUVyQix5Q0FBeUM7SUFDekMsY0FBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO0FBQ3RCLENBQUMsQ0FBQyxDQUFBO0FBRUYsU0FBUyxDQUFDLEdBQUcsRUFBRTtJQUNiLHNCQUFzQjtJQUN0QixjQUFJLENBQUMsYUFBYSxFQUFFLENBQUE7SUFFcEIsc0NBQXNDO0lBQ3RDLGNBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQTtBQUNyQixDQUFDLENBQUMsQ0FBQTtBQUVGLFFBQVEsQ0FBQyxLQUFLLElBQUksRUFBRTtJQUNsQiwrQkFBK0I7SUFDL0IsTUFBTSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQTtBQUN4RCxDQUFDLENBQUMsQ0FBQTtBQUVGLGVBQWU7QUFDZixNQUFNLENBQUMsS0FBSyxHQUFHLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQTtBQTRFeEIsaUJBQWlCO0FBQ1YsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLFNBQVMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDcEQsTUFBTSxFQUFFLEtBQUs7SUFDYixHQUFHLEVBQUUsT0FBTztJQUNaLE9BQU8sRUFBRSxFQUFFO0lBQ1gsSUFBSSxFQUFFLElBQUk7SUFDVixLQUFLLEVBQUUsRUFBRTtJQUNULE1BQU0sRUFBRSxFQUFFO0lBQ1YsR0FBRyxTQUFTO0NBQ2IsQ0FBQyxDQUFBO0FBUlcsUUFBQSxpQkFBaUIscUJBUTVCO0FBRUssTUFBTSxrQkFBa0IsR0FBRyxHQUFHLEVBQUU7SUFDckMsTUFBTSxHQUFHLEdBQUc7UUFDVixNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNsQyxJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNoQyxJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNoQyxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUMvQixTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNyQyxTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNwQixPQUFPLEVBQUUsRUFBRTtRQUNYLFVBQVUsRUFBRSxHQUFHO0tBQ2hCLENBQUE7SUFDRCxPQUFPLEdBQUcsQ0FBQTtBQUNaLENBQUMsQ0FBQTtBQVpZLFFBQUEsa0JBQWtCLHNCQVk5QjtBQUVNLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxFQUFFO0lBQ3JDLE1BQU0sTUFBTSxHQUFHO1FBQ2IsT0FBTyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7WUFDakMsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNsRSxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7WUFDcEMsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO1NBQ25DLENBQUM7UUFDRixJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLFdBQVcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztLQUN0RCxDQUFBO0lBRUQsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDLENBQUE7QUFkWSxRQUFBLGtCQUFrQixzQkFjOUI7QUFFTSxNQUFNLGNBQWMsR0FBRyxDQUFDLFNBQVMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDakQsRUFBRSxFQUFFLGNBQWM7SUFDbEIsUUFBUSxFQUFFLFVBQVU7SUFDcEIsS0FBSyxFQUFFLGtCQUFrQjtJQUN6QixRQUFRLEVBQUUsaUJBQWlCO0lBQzNCLElBQUksRUFBRSxNQUFNO0lBQ1osT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDdEIsU0FBUyxFQUFFLE1BQU07UUFDakIsUUFBUSxFQUFFLE1BQU07UUFDaEIsS0FBSyxFQUFFLFFBQVE7S0FDaEIsQ0FBQztJQUNGLFVBQVUsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtJQUNwQyxVQUFVLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7SUFDcEMsR0FBRyxTQUFTO0NBQ2IsQ0FBQyxDQUFBO0FBZFcsUUFBQSxjQUFjLGtCQWN6QjtBQUVLLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxTQUFTLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3JELEVBQUUsRUFBRSxrQkFBa0I7SUFDdEIsTUFBTSxFQUFFLE1BQU07SUFDZCxZQUFZLEVBQUUsS0FBSztJQUNuQixLQUFLLEVBQUUsR0FBRztJQUNWLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLGFBQWEsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTtJQUN2QyxPQUFPLEVBQUUsY0FBYztJQUN2QixLQUFLLEVBQUUsZUFBZTtJQUN0QixNQUFNLEVBQUUsUUFBUTtJQUNoQixHQUFHLFNBQVM7Q0FDYixDQUFDLENBQUE7QUFYVyxRQUFBLGtCQUFrQixzQkFXN0I7QUFFSyxNQUFNLGlCQUFpQixHQUFHLENBQUMsU0FBUyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwRCxFQUFFLEVBQUUsaUJBQWlCO0lBQ3JCLEdBQUcsRUFBRSxjQUFjO0lBQ25CLElBQUksRUFBRSxLQUFLO0lBQ1gsUUFBUSxFQUFFLENBQUM7SUFDWCxXQUFXLEVBQUUsa0JBQWtCO0lBQy9CLFdBQVcsRUFBRSwwQkFBMEI7SUFDdkMsTUFBTSxFQUFFLFdBQVc7SUFDbkIsYUFBYSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO0lBQ3ZDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxDQUFDO0lBQ2QsUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLElBQUksRUFBRSxJQUFJO0lBQ1YsR0FBRyxTQUFTO0NBQ2IsQ0FBQyxDQUFBO0FBakJXLFFBQUEsaUJBQWlCLHFCQWlCNUI7QUFFSyxNQUFNLGlCQUFpQixHQUFHLENBQUMsU0FBUyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwRCxFQUFFLEVBQUUsaUJBQWlCO0lBQ3JCLE9BQU8sRUFBRSxjQUFjO0lBQ3ZCLEtBQUssRUFBRSxnQkFBZ0I7SUFDdkIsVUFBVSxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxXQUFXLEVBQUU7SUFDcEUsVUFBVSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO0lBQ3BDLEdBQUcsU0FBUztDQUNiLENBQUMsQ0FBQTtBQVBXLFFBQUEsaUJBQWlCLHFCQU81QjtBQUVGLDBCQUEwQjtBQUMxQixNQUFhLGlCQUFpQjtJQUM1QixNQUFNLENBQUMsc0JBQXNCO1FBQzNCLE9BQU8sSUFBSSx3QkFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFBO0lBQ2pDLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLEVBQU87UUFDdkMsTUFBTSxNQUFNLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FvRGQsQ0FBQTtRQUVELEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDakIsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEVBQU87UUFDL0IsTUFBTSxJQUFJLEdBQUcsSUFBQSxzQkFBYyxHQUFFLENBQUE7UUFDN0IsTUFBTSxRQUFRLEdBQUcsSUFBQSwwQkFBa0IsR0FBRSxDQUFBO1FBQ3JDLE1BQU0sT0FBTyxHQUFHLElBQUEseUJBQWlCLEdBQUUsQ0FBQTtRQUNuQyxNQUFNLE9BQU8sR0FBRyxJQUFBLHlCQUFpQixHQUFFLENBQUE7UUFFbkMsbUJBQW1CO1FBQ25CLEVBQUUsQ0FBQyxPQUFPLENBQUM7OztLQUdWLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUVsRixFQUFFLENBQUMsT0FBTyxDQUFDOzs7S0FHVixDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQ25FLFFBQVEsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUU5RSxFQUFFLENBQUMsT0FBTyxDQUFDOzs7S0FHVixDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxRQUFRLEVBQ3ZELE9BQU8sQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7UUFFaEUsRUFBRSxDQUFDLE9BQU8sQ0FBQzs7O0tBR1YsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUE7UUFFdEUsT0FBTyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFBO0lBQzdDLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxFQUFPO1FBQ2hDLE1BQU0sTUFBTSxHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFFN0QsS0FBSyxNQUFNLEtBQUssSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUMzQixFQUFFLENBQUMsSUFBSSxDQUFDLGVBQWUsS0FBSyxFQUFFLENBQUMsQ0FBQTtRQUNqQyxDQUFDO0lBQ0gsQ0FBQztDQUNGO0FBdEdELDhDQXNHQztBQUVELHlCQUF5QjtBQUN6QixNQUFhLGdCQUFnQjtJQUMzQixNQUFNLENBQUMsZ0JBQWdCO1FBQ3JCLE9BQU87WUFDTCxJQUFJLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNmLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLElBQUksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2YsS0FBSyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7U0FDakIsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMscUJBQXFCO1FBQzFCLE9BQU87WUFDTCxtQkFBbUIsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDO1lBQ3RELFlBQVksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUM7WUFDNUQsZUFBZSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7WUFDbEQsYUFBYSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDO1lBQ3RELGFBQWEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUM7WUFDbEYsYUFBYSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLHlCQUFpQixHQUFFLENBQUM7WUFDL0QsZUFBZSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLHlCQUFpQixHQUFFLENBQUM7WUFDakUsY0FBYyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7U0FDbEQsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMseUJBQXlCO1FBQzlCLE9BQU87WUFDTCxLQUFLLEVBQUU7Z0JBQ0wsUUFBUSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLHNCQUFjLEdBQUUsQ0FBQztnQkFDdkQsV0FBVyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLHNCQUFjLEdBQUUsQ0FBQztnQkFDMUQsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLHNCQUFjLEdBQUUsQ0FBQztnQkFDckQsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLHNCQUFjLEdBQUUsQ0FBQztnQkFDckQsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7YUFDMUM7WUFDRCxTQUFTLEVBQUU7Z0JBQ1QsUUFBUSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLDBCQUFrQixHQUFFLENBQUM7Z0JBQzNELFlBQVksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFBLDBCQUFrQixHQUFFLENBQUMsQ0FBQztnQkFDakUsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFBLDBCQUFrQixHQUFFLENBQUM7Z0JBQ3pELE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBQSwwQkFBa0IsR0FBRSxDQUFDO2dCQUN6RCxNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQzthQUMxQztZQUNELFFBQVEsRUFBRTtnQkFDUixRQUFRLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLElBQUEseUJBQWlCLEdBQUUsQ0FBQztnQkFDMUQsZ0JBQWdCLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBQSx5QkFBaUIsR0FBRSxDQUFDLENBQUM7Z0JBQ3BFLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBQSx5QkFBaUIsR0FBRSxDQUFDO2dCQUN4RCxNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLElBQUEseUJBQWlCLEdBQUUsQ0FBQztnQkFDeEQsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7YUFDMUM7U0FDRixDQUFBO0lBQ0gsQ0FBQztDQUNGO0FBaERELDRDQWdEQztBQUVELHVCQUF1QjtBQUNoQixNQUFNLGVBQWUsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0FBQXJFLFFBQUEsZUFBZSxtQkFBc0Q7QUFFM0UsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFBcEUsUUFBQSxhQUFhLGlCQUF1RDtBQUVqRiwwQkFBMEI7QUFDbkIsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLEVBQXNCLEVBQUUsYUFBc0IsRUFBRSxFQUFFO0lBQ3BGLElBQUksQ0FBQztRQUNILE1BQU0sRUFBRSxFQUFFLENBQUE7UUFDVixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixJQUFJLGFBQWEsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7WUFDNUQsTUFBTSxJQUFJLEtBQUssQ0FBQyw4QkFBOEIsYUFBYSxXQUFXLEtBQUssQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFBO1FBQ3pGLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQyxDQUFBO0FBVFksUUFBQSxhQUFhLGlCQVN6QjtBQUVNLE1BQU0sZUFBZSxHQUFHLEtBQUssRUFBRSxFQUFzQixFQUFFLEVBQUU7SUFDOUQsSUFBSSxDQUFDO1FBQ0gsT0FBTyxNQUFNLEVBQUUsRUFBRSxDQUFBO0lBQ25CLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsTUFBTSxJQUFJLEtBQUssQ0FBQywrQ0FBK0MsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7SUFDakYsQ0FBQztBQUNILENBQUMsQ0FBQTtBQU5ZLFFBQUEsZUFBZSxtQkFNM0IiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRjpcXFlvdWNsb3VkXFxEb2N1bWVudHNcXFByb2pldHNcXExvZ2lzdGl4XFx0ZXN0c1xcYmFja2VuZFxcc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXHJcbmltcG9ydCBEYXRhYmFzZSBmcm9tICdiZXR0ZXItc3FsaXRlMydcclxuXHJcbi8vIEdsb2JhbCB0ZXN0IHNldHVwIGZvciBiYWNrZW5kIHRlc3RzXHJcbmJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgLy8gU2V0IHRlc3QgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAndGVzdCdcclxuICBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgPSAnOm1lbW9yeTonXHJcbiAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCA9ICd0ZXN0LWp3dC1zZWNyZXQnXHJcbiAgcHJvY2Vzcy5lbnYuQkNSWVBUX1JPVU5EUyA9ICc0JyAvLyBGYXN0ZXIgaGFzaGluZyBmb3IgdGVzdHNcclxuICBcclxuICAvLyBTdXBwcmVzcyBjb25zb2xlIG91dHB1dCBpbiB0ZXN0cyB1bmxlc3MgZGVidWdnaW5nXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5ERUJVR19URVNUUykge1xyXG4gICAgY29uc29sZS5sb2cgPSBqZXN0LmZuKClcclxuICAgIGNvbnNvbGUuaW5mbyA9IGplc3QuZm4oKVxyXG4gICAgY29uc29sZS53YXJuID0gamVzdC5mbigpXHJcbiAgICBjb25zb2xlLmVycm9yID0gamVzdC5mbigpXHJcbiAgfVxyXG59KVxyXG5cclxuYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgLy8gQ2xlYXIgYWxsIG1vY2tzIGJlZm9yZSBlYWNoIHRlc3RcclxuICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxyXG4gIGplc3QuY2xlYXJBbGxUaW1lcnMoKVxyXG4gIFxyXG4gIC8vIFVzZSBmYWtlIHRpbWVycyBmb3IgY29uc2lzdGVudCB0ZXN0aW5nXHJcbiAgamVzdC51c2VGYWtlVGltZXJzKClcclxufSlcclxuXHJcbmFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgLy8gUmVzdG9yZSByZWFsIHRpbWVyc1xyXG4gIGplc3QudXNlUmVhbFRpbWVycygpXHJcbiAgXHJcbiAgLy8gUmVzZXQgbW9kdWxlcyB0byBlbnN1cmUgY2xlYW4gc3RhdGVcclxuICBqZXN0LnJlc2V0TW9kdWxlcygpXHJcbn0pXHJcblxyXG5hZnRlckFsbChhc3luYyAoKSA9PiB7XHJcbiAgLy8gQ2xlYW51cCBhbnkgZ2xvYmFsIHJlc291cmNlc1xyXG4gIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKVxyXG59KVxyXG5cclxuLy8gR2xvYmFsIG1vY2tzXHJcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKVxyXG5cclxuLy8gTW9jayBOZXh0LmpzIG1vZHVsZXNcclxuamVzdC5tb2NrKCduZXh0L2hlYWRlcnMnLCAoKSA9PiAoe1xyXG4gIGNvb2tpZXM6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgc2V0OiBqZXN0LmZuKCksXHJcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgIGhhczogamVzdC5mbigpXHJcbiAgfSkpLFxyXG4gIGhlYWRlcnM6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgc2V0OiBqZXN0LmZuKCksXHJcbiAgICBoYXM6IGplc3QuZm4oKSxcclxuICAgIGRlbGV0ZTogamVzdC5mbigpXHJcbiAgfSkpXHJcbn0pKVxyXG5cclxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xyXG4gIHJlZGlyZWN0OiBqZXN0LmZuKCksXHJcbiAgbm90Rm91bmQ6IGplc3QuZm4oKVxyXG59KSlcclxuXHJcbi8vIE1vY2sgZGF0YWJhc2VcclxuamVzdC5tb2NrKCdiZXR0ZXItc3FsaXRlMycsICgpID0+IHtcclxuICByZXR1cm4gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xyXG4gICAgcHJlcGFyZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgIHJ1bjogamVzdC5mbigpLFxyXG4gICAgICBnZXQ6IGplc3QuZm4oKSxcclxuICAgICAgYWxsOiBqZXN0LmZuKClcclxuICAgIH0pLFxyXG4gICAgZXhlYzogamVzdC5mbigpLFxyXG4gICAgY2xvc2U6IGplc3QuZm4oKSxcclxuICAgIHByYWdtYTogamVzdC5mbigpLFxyXG4gICAgdHJhbnNhY3Rpb246IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGZuKSA9PiBmbilcclxuICB9KSlcclxufSlcclxuXHJcbi8vIE1vY2sgYmNyeXB0XHJcbmplc3QubW9jaygnYmNyeXB0JywgKCkgPT4gKHtcclxuICBoYXNoOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ2hhc2hlZC1wYXNzd29yZCcpLFxyXG4gIGNvbXBhcmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcclxuICBnZW5TYWx0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ3NhbHQnKVxyXG59KSlcclxuXHJcbi8vIE1vY2sganNvbndlYnRva2VuXHJcbmplc3QubW9jaygnanNvbndlYnRva2VuJywgKCkgPT4gKHtcclxuICBzaWduOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdtb2NrLWp3dC10b2tlbicpLFxyXG4gIHZlcmlmeTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHVzZXJJZDogJ3Rlc3QtdXNlci1pZCcsIHJvbGU6ICd1c2VyJyB9KSxcclxuICBkZWNvZGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyB1c2VySWQ6ICd0ZXN0LXVzZXItaWQnLCByb2xlOiAndXNlcicgfSlcclxufSkpXHJcblxyXG4vLyBNb2NrIHdpbnN0b24gbG9nZ2VyXHJcbmplc3QubW9jaygnd2luc3RvbicsICgpID0+ICh7XHJcbiAgY3JlYXRlTG9nZ2VyOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgIGluZm86IGplc3QuZm4oKSxcclxuICAgIGVycm9yOiBqZXN0LmZuKCksXHJcbiAgICB3YXJuOiBqZXN0LmZuKCksXHJcbiAgICBkZWJ1ZzogamVzdC5mbigpXHJcbiAgfSksXHJcbiAgZm9ybWF0OiB7XHJcbiAgICBjb21iaW5lOiBqZXN0LmZuKCksXHJcbiAgICB0aW1lc3RhbXA6IGplc3QuZm4oKSxcclxuICAgIGVycm9yczogamVzdC5mbigpLFxyXG4gICAganNvbjogamVzdC5mbigpLFxyXG4gICAgcHJpbnRmOiBqZXN0LmZuKClcclxuICB9LFxyXG4gIHRyYW5zcG9ydHM6IHtcclxuICAgIENvbnNvbGU6IGplc3QuZm4oKSxcclxuICAgIEZpbGU6IGplc3QuZm4oKVxyXG4gIH1cclxufSkpXHJcblxyXG4vLyBNb2NrIHdpbnN0b24tZGFpbHktcm90YXRlLWZpbGVcclxuamVzdC5tb2NrKCd3aW5zdG9uLWRhaWx5LXJvdGF0ZS1maWxlJywgKCkgPT4gamVzdC5mbigpKVxyXG5cclxuLy8gVGVzdCB1dGlsaXRpZXNcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tSZXF1ZXN0ID0gKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xyXG4gIG1ldGhvZDogJ0dFVCcsXHJcbiAgdXJsOiAnL3Rlc3QnLFxyXG4gIGhlYWRlcnM6IHt9LFxyXG4gIGJvZHk6IG51bGwsXHJcbiAgcXVlcnk6IHt9LFxyXG4gIHBhcmFtczoge30sXHJcbiAgLi4ub3ZlcnJpZGVzXHJcbn0pXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja1Jlc3BvbnNlID0gKCkgPT4ge1xyXG4gIGNvbnN0IHJlcyA9IHtcclxuICAgIHN0YXR1czogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICBqc29uOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgIHNlbmQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgZW5kOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgIHNldEhlYWRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICBnZXRIZWFkZXI6IGplc3QuZm4oKSxcclxuICAgIGhlYWRlcnM6IHt9LFxyXG4gICAgc3RhdHVzQ29kZTogMjAwXHJcbiAgfVxyXG4gIHJldHVybiByZXNcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tEYXRhYmFzZSA9ICgpID0+IHtcclxuICBjb25zdCBtb2NrRGIgPSB7XHJcbiAgICBwcmVwYXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgcnVuOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgY2hhbmdlczogMSwgbGFzdEluc2VydFJvd2lkOiAxIH0pLFxyXG4gICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobnVsbCksXHJcbiAgICAgIGFsbDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSlcclxuICAgIH0pLFxyXG4gICAgZXhlYzogamVzdC5mbigpLFxyXG4gICAgY2xvc2U6IGplc3QuZm4oKSxcclxuICAgIHByYWdtYTogamVzdC5mbigpLFxyXG4gICAgdHJhbnNhY3Rpb246IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGZuKSA9PiBmbilcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG1vY2tEYlxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja1VzZXIgPSAob3ZlcnJpZGVzID0ge30pID0+ICh7XHJcbiAgaWQ6ICd0ZXN0LXVzZXItaWQnLFxyXG4gIHVzZXJuYW1lOiAndGVzdHVzZXInLFxyXG4gIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXHJcbiAgcGFzc3dvcmQ6ICdoYXNoZWQtcGFzc3dvcmQnLFxyXG4gIHJvbGU6ICd1c2VyJyxcclxuICBwcm9maWxlOiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICBmaXJzdE5hbWU6ICdUZXN0JyxcclxuICAgIGxhc3ROYW1lOiAnVXNlcicsXHJcbiAgICB0aGVtZTogJ3N5c3RlbSdcclxuICB9KSxcclxuICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIC4uLm92ZXJyaWRlc1xyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tQYXJjZWxsZSA9IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcclxuICBpZDogJ3Rlc3QtcGFyY2VsbGUtaWQnLFxyXG4gIG51bWVybzogJ1AwMDEnLFxyXG4gIHRyYW5zcG9ydGV1cjogJ0RITCcsXHJcbiAgcG9pZHM6IDEuNSxcclxuICBwcml4X2FjaGF0OiAyNS41MCxcclxuICBkYXRlX2NyZWF0aW9uOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgdXNlcl9pZDogJ3Rlc3QtdXNlci1pZCcsXHJcbiAgbm90ZXM6ICdUZXN0IHBhcmNlbGxlJyxcclxuICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gIC4uLm92ZXJyaWRlc1xyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tQcm9kdWN0ID0gKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xyXG4gIGlkOiAndGVzdC1wcm9kdWN0LWlkJyxcclxuICBub206ICdUZXN0IFByb2R1Y3QnLFxyXG4gIHByaXg6IDE1Ljk5LFxyXG4gIHF1YW50aXRlOiAxLFxyXG4gIHBhcmNlbGxlX2lkOiAndGVzdC1wYXJjZWxsZS1pZCcsXHJcbiAgZGVzY3JpcHRpb246ICdUZXN0IHByb2R1Y3QgZGVzY3JpcHRpb24nLFxyXG4gIHN0YXR1czogJ2F2YWlsYWJsZScsXHJcbiAgZGF0ZV9jcmVhdGlvbjogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIGRhdGVfdmVudGU6IG51bGwsXHJcbiAgcHJpeF92ZW50ZTogbnVsbCxcclxuICBwbGF0ZWZvcm1lOiBudWxsLFxyXG4gIGZyYWlzX3ZlbnRlOiAwLFxyXG4gIGJlbmVmaWNlOiBudWxsLFxyXG4gIGltYWdlczogbnVsbCxcclxuICB0YWdzOiBudWxsLFxyXG4gIC4uLm92ZXJyaWRlc1xyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tTZXNzaW9uID0gKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xyXG4gIGlkOiAndGVzdC1zZXNzaW9uLWlkJyxcclxuICB1c2VyX2lkOiAndGVzdC11c2VyLWlkJyxcclxuICB0b2tlbjogJ21vY2stand0LXRva2VuJyxcclxuICBleHBpcmVzX2F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcclxuICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgLi4ub3ZlcnJpZGVzXHJcbn0pXHJcblxyXG4vLyBEYXRhYmFzZSB0ZXN0IHV0aWxpdGllc1xyXG5leHBvcnQgY2xhc3MgRGF0YWJhc2VUZXN0VXRpbHMge1xyXG4gIHN0YXRpYyBjcmVhdGVJbk1lbW9yeURhdGFiYXNlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRhYmFzZSgnOm1lbW9yeTonKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGluaXRpYWxpemVUZXN0U2NoZW1hKGRiOiBhbnkpIHtcclxuICAgIGNvbnN0IHNjaGVtYSA9IGBcclxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxyXG4gICAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXHJcbiAgICAgICAgdXNlcm5hbWUgVEVYVCBVTklRVUUgTk9UIE5VTEwsXHJcbiAgICAgICAgZW1haWwgVEVYVCBVTklRVUUgTk9UIE5VTEwsXHJcbiAgICAgICAgcGFzc3dvcmQgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICByb2xlIFRFWFQgREVGQVVMVCAndXNlcicsXHJcbiAgICAgICAgcHJvZmlsZSBURVhULFxyXG4gICAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcclxuICAgICAgICB1cGRhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHBhcmNlbGxlcyAoXHJcbiAgICAgICAgaWQgVEVYVCBQUklNQVJZIEtFWSxcclxuICAgICAgICBudW1lcm8gVEVYVCBVTklRVUUgTk9UIE5VTEwsXHJcbiAgICAgICAgdHJhbnNwb3J0ZXVyIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgcG9pZHMgUkVBTCBOT1QgTlVMTCxcclxuICAgICAgICBwcml4X2FjaGF0IFJFQUwgTk9UIE5VTEwsXHJcbiAgICAgICAgZGF0ZV9jcmVhdGlvbiBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxyXG4gICAgICAgIHVzZXJfaWQgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICBub3RlcyBURVhULFxyXG4gICAgICAgIHN0YXR1cyBURVhUIERFRkFVTFQgJ2FjdGl2ZScsXHJcbiAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMgKGlkKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcHJvZHVjdHMgKFxyXG4gICAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXHJcbiAgICAgICAgbm9tIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgcHJpeCBSRUFMIE5PVCBOVUxMLFxyXG4gICAgICAgIHF1YW50aXRlIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgICAgcGFyY2VsbGVfaWQgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxyXG4gICAgICAgIHN0YXR1cyBURVhUIERFRkFVTFQgJ2F2YWlsYWJsZScsXHJcbiAgICAgICAgZGF0ZV9jcmVhdGlvbiBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxyXG4gICAgICAgIGRhdGVfdmVudGUgREFURVRJTUUsXHJcbiAgICAgICAgcHJpeF92ZW50ZSBSRUFMLFxyXG4gICAgICAgIHBsYXRlZm9ybWUgVEVYVCxcclxuICAgICAgICBmcmFpc192ZW50ZSBSRUFMIERFRkFVTFQgMCxcclxuICAgICAgICBiZW5lZmljZSBSRUFMLFxyXG4gICAgICAgIGltYWdlcyBURVhULFxyXG4gICAgICAgIHRhZ3MgVEVYVCxcclxuICAgICAgICBGT1JFSUdOIEtFWSAocGFyY2VsbGVfaWQpIFJFRkVSRU5DRVMgcGFyY2VsbGVzIChpZClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNlc3Npb25zIChcclxuICAgICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxyXG4gICAgICAgIHVzZXJfaWQgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICB0b2tlbiBURVhUIFVOSVFVRSBOT1QgTlVMTCxcclxuICAgICAgICBleHBpcmVzX2F0IERBVEVUSU1FIE5PVCBOVUxMLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcclxuICAgICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyAoaWQpXHJcbiAgICAgICk7XHJcbiAgICBgXHJcbiAgICBcclxuICAgIGRiLmV4ZWMoc2NoZW1hKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHNlZWRUZXN0RGF0YShkYjogYW55KSB7XHJcbiAgICBjb25zdCB1c2VyID0gY3JlYXRlTW9ja1VzZXIoKVxyXG4gICAgY29uc3QgcGFyY2VsbGUgPSBjcmVhdGVNb2NrUGFyY2VsbGUoKVxyXG4gICAgY29uc3QgcHJvZHVjdCA9IGNyZWF0ZU1vY2tQcm9kdWN0KClcclxuICAgIGNvbnN0IHNlc3Npb24gPSBjcmVhdGVNb2NrU2Vzc2lvbigpXHJcblxyXG4gICAgLy8gSW5zZXJ0IHRlc3QgZGF0YVxyXG4gICAgZGIucHJlcGFyZShgXHJcbiAgICAgIElOU0VSVCBJTlRPIHVzZXJzIChpZCwgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgcm9sZSwgcHJvZmlsZSlcclxuICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/KVxyXG4gICAgYCkucnVuKHVzZXIuaWQsIHVzZXIudXNlcm5hbWUsIHVzZXIuZW1haWwsIHVzZXIucGFzc3dvcmQsIHVzZXIucm9sZSwgdXNlci5wcm9maWxlKVxyXG5cclxuICAgIGRiLnByZXBhcmUoYFxyXG4gICAgICBJTlNFUlQgSU5UTyBwYXJjZWxsZXMgKGlkLCBudW1lcm8sIHRyYW5zcG9ydGV1ciwgcG9pZHMsIHByaXhfYWNoYXQsIHVzZXJfaWQsIG5vdGVzLCBzdGF0dXMpXHJcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylcclxuICAgIGApLnJ1bihwYXJjZWxsZS5pZCwgcGFyY2VsbGUubnVtZXJvLCBwYXJjZWxsZS50cmFuc3BvcnRldXIsIHBhcmNlbGxlLnBvaWRzLCBcclxuICAgICAgICAgICBwYXJjZWxsZS5wcml4X2FjaGF0LCBwYXJjZWxsZS51c2VyX2lkLCBwYXJjZWxsZS5ub3RlcywgcGFyY2VsbGUuc3RhdHVzKVxyXG5cclxuICAgIGRiLnByZXBhcmUoYFxyXG4gICAgICBJTlNFUlQgSU5UTyBwcm9kdWN0cyAoaWQsIG5vbSwgcHJpeCwgcXVhbnRpdGUsIHBhcmNlbGxlX2lkLCBkZXNjcmlwdGlvbiwgc3RhdHVzKVxyXG4gICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8pXHJcbiAgICBgKS5ydW4ocHJvZHVjdC5pZCwgcHJvZHVjdC5ub20sIHByb2R1Y3QucHJpeCwgcHJvZHVjdC5xdWFudGl0ZSwgXHJcbiAgICAgICAgICAgcHJvZHVjdC5wYXJjZWxsZV9pZCwgcHJvZHVjdC5kZXNjcmlwdGlvbiwgcHJvZHVjdC5zdGF0dXMpXHJcblxyXG4gICAgZGIucHJlcGFyZShgXHJcbiAgICAgIElOU0VSVCBJTlRPIHNlc3Npb25zIChpZCwgdXNlcl9pZCwgdG9rZW4sIGV4cGlyZXNfYXQpXHJcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPylcclxuICAgIGApLnJ1bihzZXNzaW9uLmlkLCBzZXNzaW9uLnVzZXJfaWQsIHNlc3Npb24udG9rZW4sIHNlc3Npb24uZXhwaXJlc19hdClcclxuXHJcbiAgICByZXR1cm4geyB1c2VyLCBwYXJjZWxsZSwgcHJvZHVjdCwgc2Vzc2lvbiB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgY2xlYW5EYXRhYmFzZShkYjogYW55KSB7XHJcbiAgICBjb25zdCB0YWJsZXMgPSBbJ3Nlc3Npb25zJywgJ3Byb2R1Y3RzJywgJ3BhcmNlbGxlcycsICd1c2VycyddXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgdGFibGUgb2YgdGFibGVzKSB7XHJcbiAgICAgIGRiLmV4ZWMoYERFTEVURSBGUk9NICR7dGFibGV9YClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIFNlcnZpY2UgdGVzdCB1dGlsaXRpZXNcclxuZXhwb3J0IGNsYXNzIFNlcnZpY2VUZXN0VXRpbHMge1xyXG4gIHN0YXRpYyBjcmVhdGVNb2NrTG9nZ2VyKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaW5mbzogamVzdC5mbigpLFxyXG4gICAgICBlcnJvcjogamVzdC5mbigpLFxyXG4gICAgICB3YXJuOiBqZXN0LmZuKCksXHJcbiAgICAgIGRlYnVnOiBqZXN0LmZuKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVNb2NrQXV0aFNlcnZpY2UoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZGF0ZUNyZWRlbnRpYWxzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXHJcbiAgICAgIGhhc2hQYXNzd29yZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCdoYXNoZWQtcGFzc3dvcmQnKSxcclxuICAgICAgY29tcGFyZVBhc3N3b3JkOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXHJcbiAgICAgIGdlbmVyYXRlVG9rZW46IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ21vY2stdG9rZW4nKSxcclxuICAgICAgdmFsaWRhdGVUb2tlbjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHVzZXJJZDogJ3Rlc3QtdXNlci1pZCcsIHJvbGU6ICd1c2VyJyB9KSxcclxuICAgICAgY3JlYXRlU2Vzc2lvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKGNyZWF0ZU1vY2tTZXNzaW9uKCkpLFxyXG4gICAgICB2YWxpZGF0ZVNlc3Npb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrU2Vzc2lvbigpKSxcclxuICAgICAgZGVzdHJveVNlc3Npb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZU1vY2tEYXRhYmFzZVNlcnZpY2UoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2Vyczoge1xyXG4gICAgICAgIGZpbmRCeUlkOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlTW9ja1VzZXIoKSksXHJcbiAgICAgICAgZmluZEJ5RW1haWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrVXNlcigpKSxcclxuICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrVXNlcigpKSxcclxuICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrVXNlcigpKSxcclxuICAgICAgICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxyXG4gICAgICB9LFxyXG4gICAgICBwYXJjZWxsZXM6IHtcclxuICAgICAgICBmaW5kQnlJZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKGNyZWF0ZU1vY2tQYXJjZWxsZSgpKSxcclxuICAgICAgICBmaW5kQnlVc2VySWQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbY3JlYXRlTW9ja1BhcmNlbGxlKCldKSxcclxuICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrUGFyY2VsbGUoKSksXHJcbiAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlTW9ja1BhcmNlbGxlKCkpLFxyXG4gICAgICAgIGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXHJcbiAgICAgIH0sXHJcbiAgICAgIHByb2R1Y3RzOiB7XHJcbiAgICAgICAgZmluZEJ5SWQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrUHJvZHVjdCgpKSxcclxuICAgICAgICBmaW5kQnlQYXJjZWxsZUlkOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW2NyZWF0ZU1vY2tQcm9kdWN0KCldKSxcclxuICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrUHJvZHVjdCgpKSxcclxuICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVNb2NrUHJvZHVjdCgpKSxcclxuICAgICAgICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBc3luYyB0ZXN0IHV0aWxpdGllc1xyXG5leHBvcnQgY29uc3Qgd2FpdEZvclByb21pc2VzID0gKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRJbW1lZGlhdGUocmVzb2x2ZSkpXHJcblxyXG5leHBvcnQgY29uc3QgZmx1c2hQcm9taXNlcyA9ICgpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSlcclxuXHJcbi8vIEVycm9yIHRlc3RpbmcgdXRpbGl0aWVzXHJcbmV4cG9ydCBjb25zdCBleHBlY3RUb1Rocm93ID0gYXN5bmMgKGZuOiAoKSA9PiBQcm9taXNlPGFueT4sIGV4cGVjdGVkRXJyb3I/OiBzdHJpbmcpID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZm4oKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBmdW5jdGlvbiB0byB0aHJvdycpXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChleHBlY3RlZEVycm9yICYmICFlcnJvci5tZXNzYWdlLmluY2x1ZGVzKGV4cGVjdGVkRXJyb3IpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXJyb3IgdG8gY29udGFpbiBcIiR7ZXhwZWN0ZWRFcnJvcn1cIiwgZ290IFwiJHtlcnJvci5tZXNzYWdlfVwiYClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBleHBlY3RUb1Jlc29sdmUgPSBhc3luYyAoZm46ICgpID0+IFByb21pc2U8YW55PikgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gYXdhaXQgZm4oKVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGZ1bmN0aW9uIHRvIHJlc29sdmUsIGJ1dCBpdCB0aHJldzogJHtlcnJvci5tZXNzYWdlfWApXHJcbiAgfVxyXG59Il0sInZlcnNpb24iOjN9