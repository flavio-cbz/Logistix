6aac5c68d3a8157ab7b2cf9658fe45c5
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const validation_1 = require("../validation");
(0, vitest_1.describe)('Validation Schemas', () => {
    (0, vitest_1.describe)('SimilarSaleInputSchema', () => {
        const validSale = {
            id: 'item-1',
            price: { amount: 25.99, currency: 'EUR' },
            size_title: 'T-shirt Medium',
            status: 'sold',
            user: { login: 'seller1', feedback_reputation: 95 },
            photos: [{ url: 'https://example.com/photo1.jpg' }],
            created_at: '2023-01-01T10:00:00Z',
            sold_at: '2023-01-02T15:30:00Z'
        };
        (0, vitest_1.it)('should validate correct similar sale data', () => {
            (0, vitest_1.expect)(() => validation_1.SimilarSaleInputSchema.parse(validSale)).not.toThrow();
        });
        (0, vitest_1.it)('should reject empty ID', () => {
            const invalidSale = { ...validSale, id: '' };
            (0, vitest_1.expect)(() => validation_1.SimilarSaleInputSchema.parse(invalidSale)).toThrow();
        });
        (0, vitest_1.it)('should reject negative price amount', () => {
            const invalidSale = { ...validSale, price: { amount: -10, currency: 'EUR' } };
            (0, vitest_1.expect)(() => validation_1.SimilarSaleInputSchema.parse(invalidSale)).toThrow();
        });
        (0, vitest_1.it)('should reject empty currency', () => {
            const invalidSale = { ...validSale, price: { amount: 25.99, currency: '' } };
            (0, vitest_1.expect)(() => validation_1.SimilarSaleInputSchema.parse(invalidSale)).toThrow();
        });
        (0, vitest_1.it)('should reject invalid photo URL', () => {
            const invalidSale = { ...validSale, photos: [{ url: 'not-a-url' }] };
            (0, vitest_1.expect)(() => validation_1.SimilarSaleInputSchema.parse(invalidSale)).toThrow();
        });
        (0, vitest_1.it)('should reject negative feedback reputation', () => {
            const invalidSale = { ...validSale, user: { login: 'seller1', feedback_reputation: -1 } };
            (0, vitest_1.expect)(() => validation_1.SimilarSaleInputSchema.parse(invalidSale)).toThrow();
        });
    });
    (0, vitest_1.describe)('validateCreateMarketAnalysis', () => {
        const validSales = [
            {
                id: 'item-1',
                price: { amount: 25.99, currency: 'EUR' },
                size_title: 'T-shirt Medium',
                status: 'sold',
                user: { login: 'seller1', feedback_reputation: 95 },
                photos: [{ url: 'https://example.com/photo1.jpg' }],
                created_at: '2023-01-01T10:00:00Z',
                sold_at: '2023-01-02T15:30:00Z'
            }
        ];
        (0, vitest_1.it)('should validate correct array of sales', () => {
            (0, vitest_1.expect)(() => (0, validation_1.validateCreateMarketAnalysis)(validSales)).not.toThrow();
        });
        (0, vitest_1.it)('should reject empty array', () => {
            (0, vitest_1.expect)(() => (0, validation_1.validateCreateMarketAnalysis)([])).toThrow();
        });
        (0, vitest_1.it)('should reject non-array input', () => {
            (0, vitest_1.expect)(() => (0, validation_1.validateCreateMarketAnalysis)('not an array')).toThrow();
        });
        (0, vitest_1.it)('should reject array with invalid sales', () => {
            const invalidSales = [{ ...validSales[0], id: '' }];
            (0, vitest_1.expect)(() => (0, validation_1.validateCreateMarketAnalysis)(invalidSales)).toThrow();
        });
    });
    (0, vitest_1.describe)('PaginationSchema', () => {
        (0, vitest_1.it)('should validate correct pagination parameters', () => {
            const result = validation_1.PaginationSchema.parse({ page: 2, limit: 5 });
            (0, vitest_1.expect)(result.page).toBe(2);
            (0, vitest_1.expect)(result.limit).toBe(5);
        });
        (0, vitest_1.it)('should use default values', () => {
            const result = validation_1.PaginationSchema.parse({});
            (0, vitest_1.expect)(result.page).toBe(1);
            (0, vitest_1.expect)(result.limit).toBe(10);
        });
        (0, vitest_1.it)('should reject page less than 1', () => {
            (0, vitest_1.expect)(() => validation_1.PaginationSchema.parse({ page: 0, limit: 10 })).toThrow();
        });
        (0, vitest_1.it)('should reject limit greater than 50', () => {
            (0, vitest_1.expect)(() => validation_1.PaginationSchema.parse({ page: 1, limit: 100 })).toThrow();
        });
        (0, vitest_1.it)('should reject negative limit', () => {
            (0, vitest_1.expect)(() => validation_1.PaginationSchema.parse({ page: 1, limit: -5 })).toThrow();
        });
    });
    (0, vitest_1.describe)('validatePagination', () => {
        (0, vitest_1.it)('should validate URLSearchParams correctly', () => {
            const searchParams = new URLSearchParams('page=2&limit=5');
            const result = (0, validation_1.validatePagination)(searchParams);
            (0, vitest_1.expect)(result.page).toBe(2);
            (0, vitest_1.expect)(result.limit).toBe(5);
        });
        (0, vitest_1.it)('should use defaults for missing parameters', () => {
            const searchParams = new URLSearchParams('');
            const result = (0, validation_1.validatePagination)(searchParams);
            (0, vitest_1.expect)(result.page).toBe(1);
            (0, vitest_1.expect)(result.limit).toBe(10);
        });
        (0, vitest_1.it)('should handle invalid string values', () => {
            const searchParams = new URLSearchParams('page=invalid&limit=abc');
            // Should use defaults when parsing fails
            const result = (0, validation_1.validatePagination)(searchParams);
            (0, vitest_1.expect)(result.page).toBe(1);
            (0, vitest_1.expect)(result.limit).toBe(10);
        });
    });
    (0, vitest_1.describe)('TaskIdSchema', () => {
        (0, vitest_1.it)('should validate correct UUID', () => {
            const validUuid = '550e8400-e29b-41d4-a716-446655440000';
            (0, vitest_1.expect)(() => validation_1.TaskIdSchema.parse({ id: validUuid })).not.toThrow();
        });
        (0, vitest_1.it)('should reject invalid UUID format', () => {
            (0, vitest_1.expect)(() => validation_1.TaskIdSchema.parse({ id: 'not-a-uuid' })).toThrow();
        });
        (0, vitest_1.it)('should reject empty string', () => {
            (0, vitest_1.expect)(() => validation_1.TaskIdSchema.parse({ id: '' })).toThrow();
        });
    });
    (0, vitest_1.describe)('validateTaskId', () => {
        (0, vitest_1.it)('should validate correct UUID string', () => {
            const validUuid = '550e8400-e29b-41d4-a716-446655440000';
            (0, vitest_1.expect)(() => (0, validation_1.validateTaskId)(validUuid)).not.toThrow();
        });
        (0, vitest_1.it)('should reject invalid UUID string', () => {
            (0, vitest_1.expect)(() => (0, validation_1.validateTaskId)('not-a-uuid')).toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRjpcXFlvdWNsb3VkXFxEb2N1bWVudHNcXFByb2pldHNcXExvZ2lzdGl4XFxsaWJcXHV0aWxzXFxfX3Rlc3RzX19cXHZhbGlkYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLG1DQUE2QztBQUM3Qyw4Q0FPc0I7QUFFdEIsSUFBQSxpQkFBUSxFQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFBLGlCQUFRLEVBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFO1FBQ3RDLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLEVBQUUsRUFBRSxRQUFRO1lBQ1osS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFO1lBQ3pDLFVBQVUsRUFBRSxnQkFBZ0I7WUFDNUIsTUFBTSxFQUFFLE1BQU07WUFDZCxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLG1CQUFtQixFQUFFLEVBQUUsRUFBRTtZQUNuRCxNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxnQ0FBZ0MsRUFBRSxDQUFDO1lBQ25ELFVBQVUsRUFBRSxzQkFBc0I7WUFDbEMsT0FBTyxFQUFFLHNCQUFzQjtTQUNoQyxDQUFBO1FBRUQsSUFBQSxXQUFFLEVBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1lBQ25ELElBQUEsZUFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLG1DQUFzQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNyRSxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUEsV0FBRSxFQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtZQUNoQyxNQUFNLFdBQVcsR0FBRyxFQUFFLEdBQUcsU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQTtZQUM1QyxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxtQ0FBc0IsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNuRSxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUEsV0FBRSxFQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLFdBQVcsR0FBRyxFQUFFLEdBQUcsU0FBUyxFQUFFLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQTtZQUM3RSxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxtQ0FBc0IsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNuRSxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUEsV0FBRSxFQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtZQUN0QyxNQUFNLFdBQVcsR0FBRyxFQUFFLEdBQUcsU0FBUyxFQUFFLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUE7WUFDNUUsSUFBQSxlQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsbUNBQXNCLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDbkUsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDekMsTUFBTSxXQUFXLEdBQUcsRUFBRSxHQUFHLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUE7WUFDcEUsSUFBQSxlQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsbUNBQXNCLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDbkUsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7WUFDcEQsTUFBTSxXQUFXLEdBQUcsRUFBRSxHQUFHLFNBQVMsRUFBRSxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLG1CQUFtQixFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQTtZQUN6RixJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxtQ0FBc0IsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNuRSxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsSUFBQSxpQkFBUSxFQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtRQUM1QyxNQUFNLFVBQVUsR0FBRztZQUNqQjtnQkFDRSxFQUFFLEVBQUUsUUFBUTtnQkFDWixLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUU7Z0JBQ3pDLFVBQVUsRUFBRSxnQkFBZ0I7Z0JBQzVCLE1BQU0sRUFBRSxNQUFNO2dCQUNkLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsbUJBQW1CLEVBQUUsRUFBRSxFQUFFO2dCQUNuRCxNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxnQ0FBZ0MsRUFBRSxDQUFDO2dCQUNuRCxVQUFVLEVBQUUsc0JBQXNCO2dCQUNsQyxPQUFPLEVBQUUsc0JBQXNCO2FBQ2hDO1NBQ0YsQ0FBQTtRQUVELElBQUEsV0FBRSxFQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLHlDQUE0QixFQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3RFLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBQSxXQUFFLEVBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1lBQ25DLElBQUEsZUFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLElBQUEseUNBQTRCLEVBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUMxRCxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUEsV0FBRSxFQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtZQUN2QyxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLHlDQUE0QixFQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDdEUsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxFQUFFLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO1lBQ25ELElBQUEsZUFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLElBQUEseUNBQTRCLEVBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNwRSxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsSUFBQSxpQkFBUSxFQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUNoQyxJQUFBLFdBQUUsRUFBQywrQ0FBK0MsRUFBRSxHQUFHLEVBQUU7WUFDdkQsTUFBTSxNQUFNLEdBQUcsNkJBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUM1RCxJQUFBLGVBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQzNCLElBQUEsZUFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDOUIsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7WUFDbkMsTUFBTSxNQUFNLEdBQUcsNkJBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQ3pDLElBQUEsZUFBTSxFQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDM0IsSUFBQSxlQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUMvQixDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUEsV0FBRSxFQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyw2QkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDeEUsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsSUFBQSxlQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsNkJBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3pFLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBQSxXQUFFLEVBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO1lBQ3RDLElBQUEsZUFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLDZCQUFnQixDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3hFLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFBLGlCQUFRLEVBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLElBQUEsV0FBRSxFQUFDLDJDQUEyQyxFQUFFLEdBQUcsRUFBRTtZQUNuRCxNQUFNLFlBQVksR0FBRyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1lBQzFELE1BQU0sTUFBTSxHQUFHLElBQUEsK0JBQWtCLEVBQUMsWUFBWSxDQUFDLENBQUE7WUFDL0MsSUFBQSxlQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUMzQixJQUFBLGVBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzlCLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBQSxXQUFFLEVBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ3BELE1BQU0sWUFBWSxHQUFHLElBQUksZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUEsK0JBQWtCLEVBQUMsWUFBWSxDQUFDLENBQUE7WUFDL0MsSUFBQSxlQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUMzQixJQUFBLGVBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBQy9CLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBQSxXQUFFLEVBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sWUFBWSxHQUFHLElBQUksZUFBZSxDQUFDLHdCQUF3QixDQUFDLENBQUE7WUFDbEUseUNBQXlDO1lBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUEsK0JBQWtCLEVBQUMsWUFBWSxDQUFDLENBQUE7WUFDL0MsSUFBQSxlQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUMzQixJQUFBLGVBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBQy9CLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFBLGlCQUFRLEVBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtRQUM1QixJQUFBLFdBQUUsRUFBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDdEMsTUFBTSxTQUFTLEdBQUcsc0NBQXNDLENBQUE7WUFDeEQsSUFBQSxlQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMseUJBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNuRSxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUEsV0FBRSxFQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtZQUMzQyxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyx5QkFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDbEUsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7WUFDcEMsSUFBQSxlQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMseUJBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3hELENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFBLGlCQUFRLEVBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLElBQUEsV0FBRSxFQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLFNBQVMsR0FBRyxzQ0FBc0MsQ0FBQTtZQUN4RCxJQUFBLGVBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLDJCQUFjLEVBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDdkQsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLFdBQUUsRUFBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDM0MsSUFBQSxlQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsSUFBQSwyQkFBYyxFQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDdEQsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkY6XFxZb3VjbG91ZFxcRG9jdW1lbnRzXFxQcm9qZXRzXFxMb2dpc3RpeFxcbGliXFx1dGlsc1xcX190ZXN0c19fXFx2YWxpZGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QgfSBmcm9tICd2aXRlc3QnXHJcbmltcG9ydCB7IFxyXG4gIHZhbGlkYXRlQ3JlYXRlTWFya2V0QW5hbHlzaXMsIFxyXG4gIHZhbGlkYXRlUGFnaW5hdGlvbiwgXHJcbiAgdmFsaWRhdGVUYXNrSWQsXHJcbiAgU2ltaWxhclNhbGVJbnB1dFNjaGVtYSxcclxuICBQYWdpbmF0aW9uU2NoZW1hLFxyXG4gIFRhc2tJZFNjaGVtYVxyXG59IGZyb20gJy4uL3ZhbGlkYXRpb24nXHJcblxyXG5kZXNjcmliZSgnVmFsaWRhdGlvbiBTY2hlbWFzJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdTaW1pbGFyU2FsZUlucHV0U2NoZW1hJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRTYWxlID0ge1xyXG4gICAgICBpZDogJ2l0ZW0tMScsXHJcbiAgICAgIHByaWNlOiB7IGFtb3VudDogMjUuOTksIGN1cnJlbmN5OiAnRVVSJyB9LFxyXG4gICAgICBzaXplX3RpdGxlOiAnVC1zaGlydCBNZWRpdW0nLFxyXG4gICAgICBzdGF0dXM6ICdzb2xkJyxcclxuICAgICAgdXNlcjogeyBsb2dpbjogJ3NlbGxlcjEnLCBmZWVkYmFja19yZXB1dGF0aW9uOiA5NSB9LFxyXG4gICAgICBwaG90b3M6IFt7IHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycgfV0sXHJcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDIzLTAxLTAxVDEwOjAwOjAwWicsXHJcbiAgICAgIHNvbGRfYXQ6ICcyMDIzLTAxLTAyVDE1OjMwOjAwWidcclxuICAgIH1cclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvcnJlY3Qgc2ltaWxhciBzYWxlIGRhdGEnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBTaW1pbGFyU2FsZUlucHV0U2NoZW1hLnBhcnNlKHZhbGlkU2FsZSkpLm5vdC50b1Rocm93KClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZW1wdHkgSUQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludmFsaWRTYWxlID0geyAuLi52YWxpZFNhbGUsIGlkOiAnJyB9XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBTaW1pbGFyU2FsZUlucHV0U2NoZW1hLnBhcnNlKGludmFsaWRTYWxlKSkudG9UaHJvdygpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5lZ2F0aXZlIHByaWNlIGFtb3VudCcsICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZFNhbGUgPSB7IC4uLnZhbGlkU2FsZSwgcHJpY2U6IHsgYW1vdW50OiAtMTAsIGN1cnJlbmN5OiAnRVVSJyB9IH1cclxuICAgICAgZXhwZWN0KCgpID0+IFNpbWlsYXJTYWxlSW5wdXRTY2hlbWEucGFyc2UoaW52YWxpZFNhbGUpKS50b1Rocm93KClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZW1wdHkgY3VycmVuY3knLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludmFsaWRTYWxlID0geyAuLi52YWxpZFNhbGUsIHByaWNlOiB7IGFtb3VudDogMjUuOTksIGN1cnJlbmN5OiAnJyB9IH1cclxuICAgICAgZXhwZWN0KCgpID0+IFNpbWlsYXJTYWxlSW5wdXRTY2hlbWEucGFyc2UoaW52YWxpZFNhbGUpKS50b1Rocm93KClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBwaG90byBVUkwnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludmFsaWRTYWxlID0geyAuLi52YWxpZFNhbGUsIHBob3RvczogW3sgdXJsOiAnbm90LWEtdXJsJyB9XSB9XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBTaW1pbGFyU2FsZUlucHV0U2NoZW1hLnBhcnNlKGludmFsaWRTYWxlKSkudG9UaHJvdygpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5lZ2F0aXZlIGZlZWRiYWNrIHJlcHV0YXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludmFsaWRTYWxlID0geyAuLi52YWxpZFNhbGUsIHVzZXI6IHsgbG9naW46ICdzZWxsZXIxJywgZmVlZGJhY2tfcmVwdXRhdGlvbjogLTEgfSB9XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBTaW1pbGFyU2FsZUlucHV0U2NoZW1hLnBhcnNlKGludmFsaWRTYWxlKSkudG9UaHJvdygpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZUNyZWF0ZU1hcmtldEFuYWx5c2lzJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRTYWxlcyA9IFtcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnaXRlbS0xJyxcclxuICAgICAgICBwcmljZTogeyBhbW91bnQ6IDI1Ljk5LCBjdXJyZW5jeTogJ0VVUicgfSxcclxuICAgICAgICBzaXplX3RpdGxlOiAnVC1zaGlydCBNZWRpdW0nLFxyXG4gICAgICAgIHN0YXR1czogJ3NvbGQnLFxyXG4gICAgICAgIHVzZXI6IHsgbG9naW46ICdzZWxsZXIxJywgZmVlZGJhY2tfcmVwdXRhdGlvbjogOTUgfSxcclxuICAgICAgICBwaG90b3M6IFt7IHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycgfV0sXHJcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjMtMDEtMDFUMTA6MDA6MDBaJyxcclxuICAgICAgICBzb2xkX2F0OiAnMjAyMy0wMS0wMlQxNTozMDowMFonXHJcbiAgICAgIH1cclxuICAgIF1cclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvcnJlY3QgYXJyYXkgb2Ygc2FsZXMnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUNyZWF0ZU1hcmtldEFuYWx5c2lzKHZhbGlkU2FsZXMpKS5ub3QudG9UaHJvdygpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGVtcHR5IGFycmF5JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVDcmVhdGVNYXJrZXRBbmFseXNpcyhbXSkpLnRvVGhyb3coKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBub24tYXJyYXkgaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUNyZWF0ZU1hcmtldEFuYWx5c2lzKCdub3QgYW4gYXJyYXknKSkudG9UaHJvdygpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGFycmF5IHdpdGggaW52YWxpZCBzYWxlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZFNhbGVzID0gW3sgLi4udmFsaWRTYWxlc1swXSwgaWQ6ICcnIH1dXHJcbiAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUNyZWF0ZU1hcmtldEFuYWx5c2lzKGludmFsaWRTYWxlcykpLnRvVGhyb3coKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnUGFnaW5hdGlvblNjaGVtYScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY29ycmVjdCBwYWdpbmF0aW9uIHBhcmFtZXRlcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFBhZ2luYXRpb25TY2hlbWEucGFyc2UoeyBwYWdlOiAyLCBsaW1pdDogNSB9KVxyXG4gICAgICBleHBlY3QocmVzdWx0LnBhZ2UpLnRvQmUoMilcclxuICAgICAgZXhwZWN0KHJlc3VsdC5saW1pdCkudG9CZSg1KVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IHZhbHVlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gUGFnaW5hdGlvblNjaGVtYS5wYXJzZSh7fSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdlKS50b0JlKDEpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQubGltaXQpLnRvQmUoMTApXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHBhZ2UgbGVzcyB0aGFuIDEnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiBQYWdpbmF0aW9uU2NoZW1hLnBhcnNlKHsgcGFnZTogMCwgbGltaXQ6IDEwIH0pKS50b1Rocm93KClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgbGltaXQgZ3JlYXRlciB0aGFuIDUwJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4gUGFnaW5hdGlvblNjaGVtYS5wYXJzZSh7IHBhZ2U6IDEsIGxpbWl0OiAxMDAgfSkpLnRvVGhyb3coKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBuZWdhdGl2ZSBsaW1pdCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IFBhZ2luYXRpb25TY2hlbWEucGFyc2UoeyBwYWdlOiAxLCBsaW1pdDogLTUgfSkpLnRvVGhyb3coKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgndmFsaWRhdGVQYWdpbmF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBVUkxTZWFyY2hQYXJhbXMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCdwYWdlPTImbGltaXQ9NScpXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGFnaW5hdGlvbihzZWFyY2hQYXJhbXMpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQucGFnZSkudG9CZSgyKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmxpbWl0KS50b0JlKDUpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgdXNlIGRlZmF1bHRzIGZvciBtaXNzaW5nIHBhcmFtZXRlcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoJycpXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGFnaW5hdGlvbihzZWFyY2hQYXJhbXMpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQucGFnZSkudG9CZSgxKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmxpbWl0KS50b0JlKDEwKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHN0cmluZyB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoJ3BhZ2U9aW52YWxpZCZsaW1pdD1hYmMnKVxyXG4gICAgICAvLyBTaG91bGQgdXNlIGRlZmF1bHRzIHdoZW4gcGFyc2luZyBmYWlsc1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBhZ2luYXRpb24oc2VhcmNoUGFyYW1zKVxyXG4gICAgICBleHBlY3QocmVzdWx0LnBhZ2UpLnRvQmUoMSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5saW1pdCkudG9CZSgxMClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ1Rhc2tJZFNjaGVtYScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY29ycmVjdCBVVUlEJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWxpZFV1aWQgPSAnNTUwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAwJ1xyXG4gICAgICBleHBlY3QoKCkgPT4gVGFza0lkU2NoZW1hLnBhcnNlKHsgaWQ6IHZhbGlkVXVpZCB9KSkubm90LnRvVGhyb3coKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIFVVSUQgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4gVGFza0lkU2NoZW1hLnBhcnNlKHsgaWQ6ICdub3QtYS11dWlkJyB9KSkudG9UaHJvdygpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGVtcHR5IHN0cmluZycsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IFRhc2tJZFNjaGVtYS5wYXJzZSh7IGlkOiAnJyB9KSkudG9UaHJvdygpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZVRhc2tJZCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY29ycmVjdCBVVUlEIHN0cmluZycsICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRVdWlkID0gJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMCdcclxuICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlVGFza0lkKHZhbGlkVXVpZCkpLm5vdC50b1Rocm93KClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBVVUlEIHN0cmluZycsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlVGFza0lkKCdub3QtYS11dWlkJykpLnRvVGhyb3coKVxyXG4gICAgfSlcclxuICB9KVxyXG59KSJdLCJ2ZXJzaW9uIjozfQ==